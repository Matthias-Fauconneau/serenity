# Default arguments
kernelSize = '1'
threshold = 'otsu'
if !cube: cylinder = '' #Clips histograms and slice rendering to the inscribed cylinder

if !validation: source = Source
if validation: source = Capsules

histogram-source = Histogram source
if threshold == 'otsu': densityThreshold interclass = Otsu histogram-source
if threshold == 'lorentz': densityThreshold lorentz-rock lorentz-notrock lorentz-pore lorentz-notpore = LorentzianMixtureModel histogram-source

shift = ShiftRight source
smoothx = Smooth shift
smoothxy = Smooth smoothx
if !downsample: smooth = Smooth smoothxy shift=0
if downsample: smooth = Downsample source

pore rock = Binary smooth densityThreshold
colorize = Colorize pore source

distancex positionxx = DistanceX pore
distancey positionyx positionyy = DistanceY distancex positionxx
distance positionx positiony positionz = DistanceZ distancey positionyx positionyy
skeleton = Skeleton positionx positiony positionz
skeleton-unconnected = Tile skeleton
skeleton-connected = FloodFill skeleton-unconnected

bin-unconnected = Bin skeleton-unconnected
bin-connected = Bin skeleton-connected
unconnected = Rasterize bin-unconnected
connected = Rasterize bin-connected

# Computes histogram of maximal ball radii (i.e. pore size distribution)
histogram-unconnected = SqrtHistogram unconnected
histogram-connected = SqrtHistogram connected
volume = Sum histogram-connected
normalized-histogram-connected = Normalize histogram-connected

#For volume rendering:
#emptyx epositionx = DistanceX rock
#emptyy epositiontx epositiony = DistanceY emptyx epositionx
#emptyz epositionx epositiony epositionz = DistanceZ emptyy epositionyx epositionyy
#empty = SquareRoot emptyz # Square roots and tiles distance field before using it for empty space skiping during rendering
#density = SquareRoot distance # Square roots and normalizes (FIXME) distance to use as density values (for opacity and gradient)
#intensity = SquareRoot maximum # Square roots and normalizes (FIXME) maximum to use as intensity values (for color intensity)

#validate = Validate pore maximum

#ascii-source = ToASCII source
ascii-unconnected = ToASCII unconnected
ascii-connected = ToASCII connected

png-source = ToPNG source
png-smooth = ToPNG smooth
png-colorize = ToPNG colorize
png-distance = ToPNG distance
png-skeleton = ToPNG skeleton
png-unconnected = ToPNG unconnected
png-connected = ToPNG connected

