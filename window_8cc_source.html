<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Tomography: window.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tomography
   </div>
   <div id="projectbrief">Tomographic reconstruction software</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('window_8cc_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">window.cc</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="window_8h.html">window.h</a>&quot;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="graphics_8h.html">graphics.h</a>&quot;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="png_8h.html">png.h</a>&quot;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">static</span> thread_local <a class="code" href="struct_window.html">Window</a>* window; <span class="comment">// Current window for Widget event and render methods</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keywordtype">void</span> setWindow(<a class="code" href="struct_window.html">Window</a>* window) { ::window = window; }</div>
<div class="line"><a name="l00007"></a><span class="lineno"><a class="line" href="widget_8h.html#a3e97903a82bc719a7d9f20b60b1dd706">    7</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="widget_8h.html#a3e97903a82bc719a7d9f20b60b1dd706">setFocus</a>(<a class="code" href="struct_widget.html">Widget</a>* widget) { assert(window); window-&gt;<a class="code" href="struct_window.html#a41da9bc5985dfb654faa6927a1a5d923">focus</a>=widget; }</div>
<div class="line"><a name="l00008"></a><span class="lineno"><a class="line" href="widget_8h.html#a19fc7ca5f53c096de1d8764446eb918a">    8</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="widget_8h.html#a19fc7ca5f53c096de1d8764446eb918a">hasFocus</a>(<a class="code" href="struct_widget.html">Widget</a>* widget) { assert(window); <span class="keywordflow">return</span> window-&gt;<a class="code" href="struct_window.html#a41da9bc5985dfb654faa6927a1a5d923">focus</a>==widget; }</div>
<div class="line"><a name="l00009"></a><span class="lineno"><a class="line" href="widget_8h.html#ab7ccae68f2c996eb391f031c35872e16">    9</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="widget_8h.html#ab7ccae68f2c996eb391f031c35872e16">setDrag</a>(<a class="code" href="struct_widget.html">Widget</a>* widget) { assert(window); window-&gt;<a class="code" href="struct_window.html#a294e8b7c0eb59d515f1072964ba4ea78">drag</a>=widget; }</div>
<div class="line"><a name="l00010"></a><span class="lineno"><a class="line" href="widget_8h.html#a19d5f1b2584de00a414f6b4951d36b11">   10</a></span>&#160;<a class="code" href="structarray.html">String</a> <a class="code" href="widget_8h.html#a19d5f1b2584de00a414f6b4951d36b11">getSelection</a>(<span class="keywordtype">bool</span> clipboard) { assert(window); <span class="keywordflow">return</span> window-&gt;<a class="code" href="struct_window.html#a888d10c70c24a190d015839d2b6d77b2">getSelection</a>(clipboard); }</div>
<div class="line"><a name="l00011"></a><span class="lineno"><a class="line" href="widget_8h.html#a7138e7abc997c841f712fb05e6a43ce6">   11</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="widget_8h.html#a7138e7abc997c841f712fb05e6a43ce6">setCursor</a>(<a class="code" href="struct_rect.html">Rect</a> region, <a class="code" href="widget_8h.html#ac9c915d433bdce7b6b47c0956c850f43">Cursor</a> cursor) { assert(window); <span class="keywordflow">if</span>(region.contains(window-&gt;<a class="code" href="struct_window.html#abf8ec3917eb630f778b33f0d0d43c181">cursorPosition</a>)) window-&gt;<a class="code" href="struct_window.html#a460be572232c0d9fc2747de692d1c17a">cursor</a>=cursor; }</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keywordtype">void</span> putImage(<a class="code" href="struct_rect.html">Rect</a> region) { assert(window); window-&gt;<a class="code" href="struct_window.html#acf8178cdc1d46472101bb0b1edbbd4a5">putImage</a>(region); }</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="trace_8h.html">trace.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keywordtype">void</span> putImage(<span class="keyword">const</span> <a class="code" href="struct_image.html">Image</a>&amp; target) {</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    <span class="keywordflow">if</span>(!window) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    <a class="code" href="core_8h.html#a2e35c3438d8d47b88bd399ee34e1028a">assert_</a>(window);</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    <span class="keywordflow">if</span>(target.buffer != window-&gt;<a class="code" href="struct_window.html#af4c1dc7698860bf05ed683da9275819b">target</a>.buffer) { <a class="code" href="core_8h.html#a6b44f30da7eefc7f476da6f15e9b6677">log</a>(<span class="stringliteral">&quot;target.buffer == window-&gt;target.buffer&quot;</span>); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    <a class="code" href="core_8h.html#a2e35c3438d8d47b88bd399ee34e1028a">assert_</a>(target.buffer == window-&gt;<a class="code" href="struct_window.html#af4c1dc7698860bf05ed683da9275819b">target</a>.buffer);</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    uint delta = target.data - window-&gt;<a class="code" href="struct_window.html#af4c1dc7698860bf05ed683da9275819b">target</a>.data;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    <span class="keywordflow">if</span>(!target.stride) <span class="keywordflow">return</span>; <span class="comment">// FIXME</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <a class="code" href="core_8h.html#a2e35c3438d8d47b88bd399ee34e1028a">assert_</a>(target.stride);</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    uint x = delta % target.stride, y = delta / target.stride;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <a class="code" href="core_8h.html#a2e35c3438d8d47b88bd399ee34e1028a">assert_</a>(x+target.width&lt;=window-&gt;<a class="code" href="struct_window.html#af4c1dc7698860bf05ed683da9275819b">target</a>.width &amp;&amp; y+target.height&lt;=window-&gt;<a class="code" href="struct_window.html#af4c1dc7698860bf05ed683da9275819b">target</a>.height);</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    window-&gt;<a class="code" href="struct_window.html#acf8178cdc1d46472101bb0b1edbbd4a5">putImage</a>(<a class="code" href="vector_8h.html#ac7a1b8f134bbc80aeed76cef94416cf2">int2</a>(x,y)+<a class="code" href="struct_rect.html">Rect</a>(target.size()));</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;}</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#if X11</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#include &quot;<a class="code" href="file_8h.html">file.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="data_8h.html">data.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="time_8h.html">time.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="image_8h.html">image.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="x_8h.html">x.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;sys/socket.h&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;sys/shm.h&gt;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// Globals</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">namespace </span>BigRequests { <span class="keywordtype">int</span> EXT, event, errorBase; } <span class="keyword">using namespace </span>BigRequests;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">namespace </span>Shm { <span class="keywordtype">int</span> EXT, event, errorBase; } <span class="keyword">using namespace </span>Shm;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="keyword">namespace </span>XRender { <span class="keywordtype">int</span> EXT, event, errorBase; } <span class="keyword">using namespace </span>XRender;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">static</span> uint maximumRequestLength;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="struct_window.html#aa970503941cd10d50f297d37453e86e9">   42</a></span>&#160;<a class="code" href="struct_window.html#aa970503941cd10d50f297d37453e86e9">Window::Window</a>(<a class="code" href="struct_widget.html">Widget</a>* widget, <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; title _unused, <a class="code" href="structvec.html">int2</a> size, <span class="keyword">const</span> <a class="code" href="struct_image.html">Image</a>&amp; icon _unused) :</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="struct_socket.html">Socket</a>(<a class="code" href="string_8h.html#a3dd07628b413a2e63b2952a71d366a15">section</a>(<a class="code" href="thread_8h.html#acf0f6e9021a521d5825a5f0cf5bfb8d5">getenv</a>(<span class="stringliteral">&quot;DISPLAY&quot;</span>_,<span class="stringliteral">&quot;:0&quot;</span>_),<span class="stringliteral">&#39;:&#39;</span>)?PF_INET:PF_LOCAL, SOCK_STREAM),</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="struct_poll.html">Poll</a>(<a class="code" href="struct_socket.html">Socket</a>::fd,POLLIN), widget(widget), remote(<a class="code" href="string_8h.html#a3dd07628b413a2e63b2952a71d366a15">section</a>(<a class="code" href="thread_8h.html#acf0f6e9021a521d5825a5f0cf5bfb8d5">getenv</a>(<span class="stringliteral">&quot;DISPLAY&quot;</span>_,<span class="stringliteral">&quot;:0&quot;</span>_),<span class="stringliteral">&#39;:&#39;</span>)) {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="struct_window.html#a26f92f63d42f5ca2ab6aa87c1143080d">remote</a>) {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        <a class="code" href="structarray.html">String</a> path = <span class="stringliteral">&quot;/tmp/.X11-unix/X&quot;</span>_+<a class="code" href="string_8h.html#a3dd07628b413a2e63b2952a71d366a15">section</a>(<a class="code" href="thread_8h.html#acf0f6e9021a521d5825a5f0cf5bfb8d5">getenv</a>(<span class="stringliteral">&quot;DISPLAY&quot;</span>_,<span class="stringliteral">&quot;:0&quot;</span>_),<span class="charliteral">&#39;:&#39;</span>,1,2);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <span class="keyword">struct </span>sockaddr_un { uint16 family=1; <span class="keywordtype">char</span> path[108]={}; } addr; <a class="code" href="array_8h.html#a85e80f75a8e14e2250549c29cf403768">copy</a>(<a class="code" href="structmref.html">mref&lt;char&gt;</a>(addr.path,path.size),path);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="file_8h.html#ad550f6b197466e8ae37371ca8bee8e4d">check</a>(connect(Socket::fd,(<span class="keyword">const</span> sockaddr*)&amp;addr,2+path.size),path)) <a class="code" href="core_8h.html#a582bff114cf268d287f9e7548d9fe6d1">error</a>(<span class="stringliteral">&quot;X connection failed&quot;</span>);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        uint display = <a class="code" href="string_8h.html#a3aaa1ede719c485014e4823ffa0b0f0a">fromInteger</a>( <a class="code" href="string_8h.html#a3dd07628b413a2e63b2952a71d366a15">section</a>(<a class="code" href="thread_8h.html#acf0f6e9021a521d5825a5f0cf5bfb8d5">getenv</a>(<span class="stringliteral">&quot;DISPLAY&quot;</span>_,<span class="stringliteral">&quot;:0&quot;</span>_),<span class="charliteral">&#39;:&#39;</span>,1,2) );</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <span class="keyword">struct </span>sockaddress { uint16 family; uint16 port; uint8 host[4]; <span class="keywordtype">int</span> <a class="code" href="string_8h.html#a1976f658419b40f3427a65dcf354864e">pad</a>[2]={}; } addr = {PF_INET, bswap(uint16(6000+display)), {127,0,0,1}};</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="file_8h.html#ad550f6b197466e8ae37371ca8bee8e4d">check</a>(connect(Socket::fd,(<span class="keyword">const</span> sockaddr*)&amp;addr,<span class="keyword">sizeof</span>(addr)))) <a class="code" href="core_8h.html#a582bff114cf268d287f9e7548d9fe6d1">error</a>(<span class="stringliteral">&quot;X connection failed&quot;</span>);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    }</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    {ConnectionSetup r;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="file_8h.html#a635ef40ea7469ecaa75dbd5f37a810d9">existsFile</a>(<span class="stringliteral">&quot;.Xauthority&quot;</span>_,home()) &amp;&amp; <a class="code" href="struct_file.html">File</a>(<span class="stringliteral">&quot;.Xauthority&quot;</span>_,home()).size()&gt;0) {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;            <a class="code" href="struct_binary_data.html">BinaryData</a> s (<a class="code" href="file_8h.html#a5d8b42126bb79aba2ced6845f91d2e09">readFile</a>(<span class="stringliteral">&quot;.Xauthority&quot;</span>_,home()), <span class="keyword">true</span>);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;            <span class="keywordtype">string</span> <a class="code" href="struct_handle.html#adbc8ca925326ef2429a2f3b15a1ed430">name</a>, data;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            <span class="keywordflow">while</span>(s) { <span class="comment">// FIXME: Assumes last entry is correct</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                uint16 family _unused = s.<a class="code" href="struct_binary_data.html#acfa4555151377aebe0914dd7f5524bc1">read</a>();</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                {uint16 length = s.<a class="code" href="struct_binary_data.html#acfa4555151377aebe0914dd7f5524bc1">read</a>(); <span class="keywordflow">if</span>(length&gt;s.<a class="code" href="struct_data.html#a356fa96965851da6bdf6d959482a8ed8">available</a>()) <span class="keywordflow">break</span>;<span class="comment">/*FIXME*/</span> <span class="keywordtype">string</span> host _unused = s.<a class="code" href="struct_binary_data.html#acfa4555151377aebe0914dd7f5524bc1">read</a>&lt;byte&gt;(length); }</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                {uint16 length = s.<a class="code" href="struct_binary_data.html#acfa4555151377aebe0914dd7f5524bc1">read</a>(); <span class="keywordtype">string</span> port _unused = s.<a class="code" href="struct_binary_data.html#acfa4555151377aebe0914dd7f5524bc1">read</a>&lt;byte&gt;(length); }</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                {uint16 length = s.<a class="code" href="struct_binary_data.html#acfa4555151377aebe0914dd7f5524bc1">read</a>(); name = s.<a class="code" href="struct_binary_data.html#acfa4555151377aebe0914dd7f5524bc1">read</a>&lt;byte&gt;(length); r.nameSize=name.size; }</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                {uint16 length = s.<a class="code" href="struct_binary_data.html#acfa4555151377aebe0914dd7f5524bc1">read</a>(); data = s.<a class="code" href="struct_binary_data.html#acfa4555151377aebe0914dd7f5524bc1">read</a>&lt;byte&gt;(length); r.dataSize=data.size; }</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            }</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            send(<a class="code" href="array_8h.html#afb917b998002d51b040b0b2205572517">String</a>(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r)+name+<a class="code" href="string_8h.html#a1976f658419b40f3427a65dcf354864e">pad</a>(4, name.size)+data+<a class="code" href="string_8h.html#a1976f658419b40f3427a65dcf354864e">pad</a>(4,data.size)));</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        } <span class="keywordflow">else</span> send(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r));</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    }</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    {ConnectionSetupReply1 _unused r=read&lt;ConnectionSetupReply1&gt;(); assert(r.status==1);}</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    {ConnectionSetupReply2 r=read&lt;ConnectionSetupReply2&gt;();</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <a class="code" href="struct_stream.html#a7b5f7c1782995c957e69bf8d212dface">read</a>(<a class="code" href="data_8h.html#aeda4f97fb92d2cd709c735708ee1ee35">align</a>(4,r.vendorLength));</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        read&lt;XFormat&gt;(r.numFormats);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;r.numScreens;i++){ Screen screen=read&lt;Screen&gt;();</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;screen.numDepths;i++) { XDepth depth = read&lt;XDepth&gt;();</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                <span class="keywordflow">if</span>(depth.numVisualTypes) <span class="keywordflow">for</span>(VisualType visualType: read&lt;VisualType&gt;(depth.numVisualTypes)) {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                    <span class="keywordflow">if</span>(!<a class="code" href="struct_window.html#a89ead7022781abfd6e933f850a08137f">visual</a> &amp;&amp; depth.depth==32) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                        <a class="code" href="struct_window.html#afa9a5b47735a7fe05a70ac83fc9f463e">displaySize</a>=<a class="code" href="vector_8h.html#ac7a1b8f134bbc80aeed76cef94416cf2">int2</a>(screen.width,screen.height); <a class="code" href="struct_window.html#a298d320bc89f538a45f7549ca70e9d77">root</a> = screen.root; <a class="code" href="struct_window.html#a89ead7022781abfd6e933f850a08137f">visual</a>=visualType.id;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                    }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keywordtype">id</span>=r.ridBase;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <a class="code" href="struct_window.html#ad9c3e41989faec00c4eeaf6459eaadad">minKeyCode</a>=r.minKeyCode, maxKeyCode=r.maxKeyCode;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    assert(<a class="code" href="struct_window.html#a89ead7022781abfd6e933f850a08137f">visual</a>);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    {QueryExtensionReply r=readReply&lt;QueryExtensionReply&gt;((</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        {QueryExtension r; r.length=<span class="stringliteral">&quot;BIG-REQUESTS&quot;</span>_.size; r.size+=<a class="code" href="data_8h.html#aeda4f97fb92d2cd709c735708ee1ee35">align</a>(4,r.length)/4; <a class="code" href="array_8h.html#afb917b998002d51b040b0b2205572517">String</a>(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r)+<span class="stringliteral">&quot;BIG-REQUESTS&quot;</span>_+<a class="code" href="string_8h.html#a1976f658419b40f3427a65dcf354864e">pad</a>(4,r.length));}));</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        BigRequests::EXT=r.major; BigRequests::event=r.firstEvent; BigRequests::errorBase=r.firstError;}</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    maximumRequestLength = readReply&lt;BigRequests::BigReqEnableReply&gt;(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(BigRequests::BigReqEnable())).maximumRequestLength;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    {QueryExtensionReply r=readReply&lt;QueryExtensionReply&gt;((</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        {QueryExtension r; r.length=<span class="stringliteral">&quot;MIT-SHM&quot;</span>_.size; r.size+=<a class="code" href="data_8h.html#aeda4f97fb92d2cd709c735708ee1ee35">align</a>(4,r.length)/4; <a class="code" href="array_8h.html#afb917b998002d51b040b0b2205572517">String</a>(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r)+<span class="stringliteral">&quot;MIT-SHM&quot;</span>_+<a class="code" href="string_8h.html#a1976f658419b40f3427a65dcf354864e">pad</a>(4,r.length));}));</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        Shm::EXT=r.major; Shm::event=r.firstEvent; Shm::errorBase=r.firstError;}</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    {QueryExtensionReply r=readReply&lt;QueryExtensionReply&gt;((</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        {QueryExtension r; r.length=<span class="stringliteral">&quot;RENDER&quot;</span>_.size; r.size+=<a class="code" href="data_8h.html#aeda4f97fb92d2cd709c735708ee1ee35">align</a>(4,r.length)/4; <a class="code" href="array_8h.html#afb917b998002d51b040b0b2205572517">String</a>(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r)+<span class="stringliteral">&quot;RENDER&quot;</span>_+<a class="code" href="string_8h.html#a1976f658419b40f3427a65dcf354864e">pad</a>(4,r.length));}));</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        XRender::EXT=r.major; XRender::event=r.firstEvent; XRender::errorBase=r.firstError; }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    {QueryPictFormatsReply r=readReply&lt;QueryPictFormatsReply&gt;(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(QueryPictFormats()));</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <a class="code" href="structarray.html">array&lt;PictFormInfo&gt;</a> formats = read&lt;PictFormInfo&gt;( r.numFormats);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordflow">for</span>(uint _unused i: <a class="code" href="structrange.html">range</a>(r.numScreens)) { PictScreen screen = read&lt;PictScreen&gt;();</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            <span class="keywordflow">for</span>(uint _unused i: <a class="code" href="structrange.html">range</a>(screen.numDepths)) { PictDepth depth = read&lt;PictDepth&gt;();</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                <a class="code" href="structarray.html">array&lt;PictVisual&gt;</a> visuals = read&lt;PictVisual&gt;(depth.numPictVisuals);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                <span class="keywordflow">if</span>(depth.depth==32) <span class="keywordflow">for</span>(PictVisual pictVisual: visuals) <span class="keywordflow">if</span>(pictVisual.visual==<a class="code" href="struct_window.html#a89ead7022781abfd6e933f850a08137f">visual</a>) <a class="code" href="struct_window.html#a7abf72670b0092adb82925b2ccfce020">format</a>=pictVisual.format;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            }</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        assert(<a class="code" href="struct_window.html#a7abf72670b0092adb82925b2ccfce020">format</a>);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        read&lt;uint&gt;(r.numSubpixels);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    }</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    {CreateColormap r; r.colormap=<span class="keywordtype">id</span>+Colormap; r.window=<a class="code" href="struct_window.html#a298d320bc89f538a45f7549ca70e9d77">root</a>; r.visual=<a class="code" href="struct_window.html#a89ead7022781abfd6e933f850a08137f">visual</a>; send(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r));}</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    this-&gt;size=size;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    this-&gt;<a class="code" href="struct_window.html#a8106b7bc5759097e8c2ae91d36f236be">title</a> = <a class="code" href="array_8h.html#a85e80f75a8e14e2250549c29cf403768">copy</a>(<a class="code" href="array_8h.html#afb917b998002d51b040b0b2205572517">String</a>(<a class="code" href="struct_window.html#a8106b7bc5759097e8c2ae91d36f236be">title</a>));</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#a97e96ce9f330de05a3fb33b924bcfb70">icon</a>) this-&gt;<a class="code" href="struct_window.html#a97e96ce9f330de05a3fb33b924bcfb70">icon</a> = <a class="code" href="array_8h.html#a85e80f75a8e14e2250549c29cf403768">copy</a>(<a class="code" href="struct_window.html#a97e96ce9f330de05a3fb33b924bcfb70">icon</a>);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="struct_window.html#a91045daaa903849946bd9530a71493bf">actions</a>[Escape] = []{ <a class="code" href="thread_8h.html#a660644fcee026e3f44448456eb771d0a">exit</a>(); };</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="struct_window.html#a91045daaa903849946bd9530a71493bf">actions</a>[PrintScreen] = [<span class="keyword">this</span>]{ <a class="code" href="struct_locker.html">Locker</a> <a class="code" href="struct_window.html#aa3eaa4a595519c07fba8b63fddaf95af">lock</a>(<a class="code" href="struct_window.html#a984a75320e72593920be4d36bf46112e">renderLock</a>); <a class="code" href="file_8h.html#a6cb5805c80e446c95264e792058a5403">writeFile</a>(this-&gt;<a class="code" href="struct_window.html#a8106b7bc5759097e8c2ae91d36f236be">title</a>+<span class="stringliteral">&quot;.png&quot;</span>_,<a class="code" href="png_8h.html#a4ee755075a1ea4ce09f8285ecc27f6a0">encodePNG</a>(target)); };</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="struct_window.html#a245d821e6016fa1f6970ccbbedd635f6">  116</a></span>&#160;<a class="code" href="struct_window.html#a245d821e6016fa1f6970ccbbedd635f6">Window::~Window</a>() {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    {FreeGC r; r.context=<span class="keywordtype">id</span>+GContext; send(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r));}</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    {DestroyWindow r; r.id=<span class="keywordtype">id</span>+XWindow; send(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r));}</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">// Render</span></div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="struct_window.html#a9f324a3c5a82585e937f3cbfe91611e0">  122</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="struct_window.html#a9f324a3c5a82585e937f3cbfe91611e0">Window::event</a>() {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">/*if(revents!=IDLE)*/</span> <span class="keywordflow">for</span>(;;) { <span class="comment">// Always process any pending X input events before rendering</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <a class="code" href="struct_window.html#aa3eaa4a595519c07fba8b63fddaf95af">lock</a>.<a class="code" href="struct_lock.html#a9274a7e20cd5884ea268698d6db8eed6">lock</a>();</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="struct_stream.html#a6cda41b17cf9fb7243a71a4d26b13377">poll</a>()) { <a class="code" href="struct_window.html#aa3eaa4a595519c07fba8b63fddaf95af">lock</a>.<a class="code" href="struct_lock.html#a99860d8e0b2fa7d0d2d77fd1dbb05ce3">unlock</a>(); <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        uint8 type = read&lt;uint8&gt;();</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        XEvent e = read&lt;XEvent&gt;();</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <a class="code" href="struct_window.html#aa3eaa4a595519c07fba8b63fddaf95af">lock</a>.<a class="code" href="struct_lock.html#a99860d8e0b2fa7d0d2d77fd1dbb05ce3">unlock</a>();</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <a class="code" href="struct_window.html#a8cfdd24f79ee7e187793fb5643edf33f">processEvent</a>(type, e);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">while</span>(semaphore.<a class="code" href="struct_semaphore.html#a5c1c10f122da5c7f5c1055508e633ada">tryAcquire</a>(1)) { <a class="code" href="struct_window.html#aa3eaa4a595519c07fba8b63fddaf95af">lock</a>.<a class="code" href="struct_lock.html#a9274a7e20cd5884ea268698d6db8eed6">lock</a>(); QEvent e = eventQueue.<a class="code" href="structarray.html#a8d10b69ad58f0384b80683614ece97bf">take</a>(0); <a class="code" href="struct_window.html#aa3eaa4a595519c07fba8b63fddaf95af">lock</a>.<a class="code" href="struct_lock.html#a99860d8e0b2fa7d0d2d77fd1dbb05ce3">unlock</a>(); <a class="code" href="struct_window.html#a8cfdd24f79ee7e187793fb5643edf33f">processEvent</a>(e.type, e.event); }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#a755a60bcf541d7f992f1bf5063e8946a">motionPending</a>) <a class="code" href="struct_window.html#a8cfdd24f79ee7e187793fb5643edf33f">processEvent</a>(LastEvent, XEvent());</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#ae296facf4aba47238e946e966ea14f1f">needRender</a>) { render(); <a class="code" href="struct_window.html#ae296facf4aba47238e946e966ea14f1f">needRender</a>=<span class="keyword">false</span>; }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;}</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="keywordtype">void</span> Window::render() {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="struct_locker.html">Locker</a> <a class="code" href="struct_window.html#aa3eaa4a595519c07fba8b63fddaf95af">lock</a>(<a class="code" href="struct_window.html#a984a75320e72593920be4d36bf46112e">renderLock</a>);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">if</span>(target.size() != size) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#a26f92f63d42f5ca2ab6aa87c1143080d">remote</a>) target = <a class="code" href="struct_image.html">Image</a>(size.x, size.y);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#af4cb9ddb3056aab85fb9e3d5ed940b36">shm</a>) {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                {Shm::Detach r; r.seg=<span class="keywordtype">id</span>+Segment; send(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r));}</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                shmdt(target.data);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                shmctl(<a class="code" href="struct_window.html#af4cb9ddb3056aab85fb9e3d5ed940b36">shm</a>, IPC_RMID, 0);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            target.width=size.x, target.height=size.y;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            target.stride = <a class="code" href="struct_window.html#a26f92f63d42f5ca2ab6aa87c1143080d">remote</a> ? size.x : <a class="code" href="data_8h.html#aeda4f97fb92d2cd709c735708ee1ee35">align</a>(16,size.x);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            target.buffer.size = target.height*target.stride;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            <a class="code" href="core_8h.html#a2e35c3438d8d47b88bd399ee34e1028a">assert_</a>(target.buffer.size &lt; 4096*4096, target.width, target.height);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <a class="code" href="struct_window.html#af4cb9ddb3056aab85fb9e3d5ed940b36">shm</a> = <a class="code" href="file_8h.html#ad550f6b197466e8ae37371ca8bee8e4d">check</a>( shmget(0, target.buffer.size*<span class="keyword">sizeof</span>(<a class="code" href="structvec.html">byte4</a>), IPC_CREAT | 0777) );</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            target.buffer.data = target.data = (<a class="code" href="structvec.html">byte4</a>*)<a class="code" href="file_8h.html#ad550f6b197466e8ae37371ca8bee8e4d">check</a>( shmat(<a class="code" href="struct_window.html#af4cb9ddb3056aab85fb9e3d5ed940b36">shm</a>, 0, 0) ); assert(target.data);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            Shm::Attach r; r.seg=<span class="keywordtype">id</span>+Segment; r.shm=<a class="code" href="struct_window.html#af4cb9ddb3056aab85fb9e3d5ed940b36">shm</a>; send(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r));</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="struct_window.html#a887f6b512172fbb2e0cb1df05e8c2a91">renderBackground</a>(target);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="core_8h.html#a2e35c3438d8d47b88bd399ee34e1028a">assert_</a>(!window);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    window=<span class="keyword">this</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="struct_window.html#a982f4b64cdc6d79b9e66ffde645ed042">widget</a>-&gt;render(target);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    window=0;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="struct_window.html#acf8178cdc1d46472101bb0b1edbbd4a5">putImage</a>();</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;}</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="struct_window.html#acf8178cdc1d46472101bb0b1edbbd4a5">  164</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="struct_window.html#acf8178cdc1d46472101bb0b1edbbd4a5">Window::putImage</a>(<a class="code" href="struct_rect.html">Rect</a> rect) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">if</span>(rect==<a class="code" href="struct_rect.html">Rect</a>(0)) rect=<a class="code" href="struct_rect.html">Rect</a>(target.size());</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="core_8h.html#a2e35c3438d8d47b88bd399ee34e1028a">assert_</a>(<span class="keywordtype">id</span>); <a class="code" href="core_8h.html#a2e35c3438d8d47b88bd399ee34e1028a">assert_</a>(rect.size());</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#a26f92f63d42f5ca2ab6aa87c1143080d">remote</a>) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <a class="code" href="struct_image.html">Image</a> target = <a class="code" href="image_8h.html#a340a709ab46f72c14522a7e94439b6ca">share</a>(this-&gt;target);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">if</span>(rect != <a class="code" href="struct_rect.html">Rect</a>(target.size())) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            target = <a class="code" href="struct_image.html">Image</a>(rect.size());</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <a class="code" href="array_8h.html#a85e80f75a8e14e2250549c29cf403768">copy</a>(target, <a class="code" href="image_8h.html#a89146bb1b01b095bf4291811b1a90fd5">clip</a>(this-&gt;target, rect));</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <a class="code" href="core_8h.html#a2e35c3438d8d47b88bd399ee34e1028a">assert_</a>(target.buffer.size == (<span class="keywordtype">size_t</span>)target.size().x*target.size().y);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        ::PutImage r; r.drawable=<span class="keywordtype">id</span>+XWindow; r.context=<span class="keywordtype">id</span>+GContext; r.w=target.size().x, r.h=target.size().y; r.x=rect.min.x, r.y=rect.min.y; r.size += target.buffer.size;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <a class="code" href="core_8h.html#a2e35c3438d8d47b88bd399ee34e1028a">assert_</a>(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r).size + cast&lt;byte&gt;(target.buffer).size == r.size*4);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        send(<a class="code" href="array_8h.html#afb917b998002d51b040b0b2205572517">String</a>(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r)+cast&lt;byte&gt;(target.buffer)));</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <a class="code" href="core_8h.html#a2e35c3438d8d47b88bd399ee34e1028a">assert_</a>(r.size &lt;= maximumRequestLength, r.size, maximumRequestLength);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        Shm::PutImage r; r.window=<span class="keywordtype">id</span>+XWindow; r.context=<span class="keywordtype">id</span>+GContext; r.seg=<span class="keywordtype">id</span>+Segment;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        r.totalW=target.stride; r.totalH=target.height;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        r.srcX = rect.position().x, r.srcY = rect.position().y, r.srcW=rect.size().x; r.srcH=rect.size().y;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        r.dstX = rect.position().x, r.dstY = rect.position().y;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        send(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r));</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;}</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">// Events</span></div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="struct_window.html#a8cfdd24f79ee7e187793fb5643edf33f">  188</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="struct_window.html#a8cfdd24f79ee7e187793fb5643edf33f">Window::processEvent</a>(uint8 type, <span class="keyword">const</span> XEvent&amp; event) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">if</span>(type==0) { <span class="keyword">const</span> XError&amp; e=(<span class="keyword">const</span> XError&amp;)event; uint8 code=e.code;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordflow">if</span>(e.major==XRender::EXT) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            <span class="keywordtype">int</span> reqSize=<span class="keyword">sizeof</span>(XRender::requests)/<span class="keyword">sizeof</span>(*XRender::requests);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="keywordflow">if</span>(code&gt;=XRender::errorBase &amp;&amp; code&lt;=XRender::errorBase+XRender::errorCount) { code-=XRender::errorBase;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                assert(code&lt;<span class="keyword">sizeof</span>(XRender::xErrors)/<span class="keyword">sizeof</span>(*XRender::xErrors));</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                <a class="code" href="core_8h.html#a6b44f30da7eefc7f476da6f15e9b6677">log</a>(<span class="stringliteral">&quot;XError&quot;</span>,XRender::xErrors[code],<span class="stringliteral">&quot;request&quot;</span>,e.minor&lt;reqSize?<a class="code" href="structarray.html">String</a>(XRender::requests[e.minor]):dec(e.minor));</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                assert(code&lt;<span class="keyword">sizeof</span>(::errors)/<span class="keyword">sizeof</span>(*::errors));</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                <a class="code" href="core_8h.html#a6b44f30da7eefc7f476da6f15e9b6677">log</a>(<span class="stringliteral">&quot;XError&quot;</span>,::errors[code],<span class="stringliteral">&quot;request&quot;</span>,e.minor&lt;reqSize?<a class="code" href="structarray.html">String</a>(XRender::requests[e.minor]):dec(e.minor));</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(e.major==Shm::EXT) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <span class="keywordtype">int</span> reqSize=<span class="keyword">sizeof</span>(Shm::requests)/<span class="keyword">sizeof</span>(*Shm::requests);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <span class="keywordflow">if</span>(code&gt;=Shm::errorBase &amp;&amp; code&lt;=Shm::errorBase+Shm::errorCount) { code-=Shm::errorBase;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                assert(code&lt;<span class="keyword">sizeof</span>(Shm::xErrors)/<span class="keyword">sizeof</span>(*Shm::xErrors));</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                <a class="code" href="core_8h.html#a6b44f30da7eefc7f476da6f15e9b6677">log</a>(<span class="stringliteral">&quot;XError&quot;</span>,Shm::xErrors[code],<span class="stringliteral">&quot;request&quot;</span>,e.minor&lt;reqSize?<a class="code" href="structarray.html">String</a>(Shm::requests[e.minor]):dec(e.minor));</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                assert(code&lt;<span class="keyword">sizeof</span>(::errors)/<span class="keyword">sizeof</span>(*::errors));</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                <a class="code" href="core_8h.html#a6b44f30da7eefc7f476da6f15e9b6677">log</a>(<span class="stringliteral">&quot;XError&quot;</span>,::xErrors[code],<span class="stringliteral">&quot;request&quot;</span>,e.minor&lt;reqSize?<a class="code" href="structarray.html">String</a>(Shm::requests[e.minor]):dec(e.minor));</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            assert(code&lt;<span class="keyword">sizeof</span>(::errors)/<span class="keyword">sizeof</span>(*::errors),code,e.major);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <span class="keywordtype">int</span> reqSize=<span class="keyword">sizeof</span>(::requests)/<span class="keyword">sizeof</span>(*::requests);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <a class="code" href="core_8h.html#a6b44f30da7eefc7f476da6f15e9b6677">log</a>(<span class="stringliteral">&quot;XError&quot;</span>,::xErrors[code],<span class="stringliteral">&quot;request&quot;</span>,e.major&lt;reqSize?<a class="code" href="structarray.html">String</a>(::requests[e.major]):dec(e.major),<span class="stringliteral">&quot;minor&quot;</span>,e.minor);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(type==1) <a class="code" href="core_8h.html#a582bff114cf268d287f9e7548d9fe6d1">error</a>(<span class="stringliteral">&quot;Unexpected reply&quot;</span>);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">else</span> { <span class="keyword">const</span> XEvent&amp; e=<a class="code" href="struct_window.html#a9f324a3c5a82585e937f3cbfe91611e0">event</a>; type&amp;=0b01111111; <span class="comment">//msb set if sent by SendEvent</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <a class="code" href="core_8h.html#a2e35c3438d8d47b88bd399ee34e1028a">assert_</a>(!window);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        window=<span class="keyword">this</span>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;         <span class="keywordflow">if</span>(type==MotionNotify) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <a class="code" href="struct_window.html#abf8ec3917eb630f778b33f0d0d43c181">cursorPosition</a> = <a class="code" href="vector_8h.html#ac7a1b8f134bbc80aeed76cef94416cf2">int2</a>(e.x,e.y);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            cursorState = e.state;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <a class="code" href="struct_window.html#a755a60bcf541d7f992f1bf5063e8946a">motionPending</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(type==Shm::event+Shm::Completion) { <a class="code" href="core_8h.html#a2e35c3438d8d47b88bd399ee34e1028a">assert_</a>(!<a class="code" href="struct_window.html#a26f92f63d42f5ca2ab6aa87c1143080d">remote</a>); <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#ae3746e43d9b0727a5310c5cfda884934">displayed</a>) <a class="code" href="struct_window.html#ae3746e43d9b0727a5310c5cfda884934">displayed</a>(); }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#a755a60bcf541d7f992f1bf5063e8946a">motionPending</a>) {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                <a class="code" href="struct_window.html#a755a60bcf541d7f992f1bf5063e8946a">motionPending</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                <a class="code" href="widget_8h.html#ac9c915d433bdce7b6b47c0956c850f43">Cursor</a> lastCursor = <a class="code" href="struct_window.html#a460be572232c0d9fc2747de692d1c17a">cursor</a>; <a class="code" href="struct_window.html#a460be572232c0d9fc2747de692d1c17a">cursor</a>=Cursor::Arrow;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#a294e8b7c0eb59d515f1072964ba4ea78">drag</a> &amp;&amp; cursorState&amp;Button1Mask &amp;&amp; <a class="code" href="struct_window.html#a294e8b7c0eb59d515f1072964ba4ea78">drag</a>-&gt;<a class="code" href="struct_widget.html#a4b8de06108cb07a1981372a6a865ed97">mouseEvent</a>(<a class="code" href="struct_window.html#abf8ec3917eb630f778b33f0d0d43c181">cursorPosition</a>, size, Widget::Motion, Widget::LeftButton)) {} <span class="comment">//needUpdate=true; //FIXME: Assumes all widgets supports partial updates</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#a982f4b64cdc6d79b9e66ffde645ed042">widget</a>-&gt;<a class="code" href="struct_widget.html#a4b8de06108cb07a1981372a6a865ed97">mouseEvent</a>(<a class="code" href="struct_window.html#abf8ec3917eb630f778b33f0d0d43c181">cursorPosition</a>, size, Widget::Motion, (cursorState&amp;Button1Mask)?Widget::LeftButton:Widget::None)) {} <span class="comment">//needUpdate=true; //FIXME: Assumes all widgets supports partial updates</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#a460be572232c0d9fc2747de692d1c17a">cursor</a>!=lastCursor) <a class="code" href="struct_window.html#a5bd9450a50bc2dc26adbef5f55391a1b">setCursor</a>(<a class="code" href="struct_window.html#a460be572232c0d9fc2747de692d1c17a">cursor</a>);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <span class="keywordflow">if</span>(type==ButtonPress) {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                <a class="code" href="struct_widget.html">Widget</a>* <a class="code" href="struct_window.html#a41da9bc5985dfb654faa6927a1a5d923">focus</a>=this-&gt;<a class="code" href="struct_window.html#a41da9bc5985dfb654faa6927a1a5d923">focus</a>; this-&gt;focus=0;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                <a class="code" href="struct_window.html#ae2197177bf94e4a5f9964683be916969">dragStart</a>=<a class="code" href="vector_8h.html#ac7a1b8f134bbc80aeed76cef94416cf2">int2</a>(e.rootX,e.rootY), dragPosition=<a class="code" href="struct_window.html#ac3105623c842ce7275e3798a91285ca1">position</a>, dragSize=size;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#a982f4b64cdc6d79b9e66ffde645ed042">widget</a>-&gt;<a class="code" href="struct_widget.html#a4b8de06108cb07a1981372a6a865ed97">mouseEvent</a>(<a class="code" href="structvec.html">int2</a>(e.x,e.y), size, Widget::Press, (<a class="code" href="struct_widget.html#ae852395c66e10fbb55d0a35cab7ffb83">Widget::Button</a>)e.key) || this-&gt;focus!=<a class="code" href="struct_window.html#a41da9bc5985dfb654faa6927a1a5d923">focus</a>) {} <span class="comment">//needUpdate=true; //FIXME: Assumes all widgets supports partial updates</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(type==ButtonRelease) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                <a class="code" href="struct_window.html#a294e8b7c0eb59d515f1072964ba4ea78">drag</a>=0;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                <span class="keywordflow">if</span>(e.key &lt;= Widget::RightButton &amp;&amp; <a class="code" href="struct_window.html#a982f4b64cdc6d79b9e66ffde645ed042">widget</a>-&gt;<a class="code" href="struct_widget.html#a4b8de06108cb07a1981372a6a865ed97">mouseEvent</a>(<a class="code" href="structvec.html">int2</a>(e.x,e.y), size, Widget::Release, (<a class="code" href="struct_widget.html#ae852395c66e10fbb55d0a35cab7ffb83">Widget::Button</a>)e.key)) {} <span class="comment">//needUpdate=true; //FIXME: Assumes all widgets supports partial updates</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(type==KeyPress) keyPress(<a class="code" href="struct_window.html#a8a198824af75674d41247259362cb7bc">KeySym</a>(e.key, <a class="code" href="struct_window.html#a41da9bc5985dfb654faa6927a1a5d923">focus</a>==<a class="code" href="struct_window.html#a124c62a004dee1f7795e2d3fb382c4fc">directInput</a> ? 0 : e.state), (Modifiers)e.state);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(type==KeyRelease) keyRelease(<a class="code" href="struct_window.html#a8a198824af75674d41247259362cb7bc">KeySym</a>(e.key, <a class="code" href="struct_window.html#a41da9bc5985dfb654faa6927a1a5d923">focus</a>==<a class="code" href="struct_window.html#a124c62a004dee1f7795e2d3fb382c4fc">directInput</a> ? 0 : e.state), (Modifiers)e.state);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(type==EnterNotify || type==LeaveNotify) {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                <span class="keywordflow">if</span>(type==LeaveNotify &amp;&amp; <a class="code" href="struct_window.html#a9b1e832c4b75ffcaf1c5aa6ec0bb2cd8">hideOnLeave</a>) <a class="code" href="struct_window.html#a4626829d3cb9d01285f739d2bbc69b74">hide</a>();</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#a982f4b64cdc6d79b9e66ffde645ed042">widget</a>-&gt;<a class="code" href="struct_widget.html#a4b8de06108cb07a1981372a6a865ed97">mouseEvent</a>( <a class="code" href="structvec.html">int2</a>(e.x,e.y), size, type==EnterNotify?Widget::Enter:Widget::Leave,</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                                       e.state&amp;Button1Mask?Widget::LeftButton:Widget::None) ) {} <span class="comment">//needUpdate=true; //FIXME: Assumes all widgets supports partial updates</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(type==Expose) { <span class="keywordflow">if</span>(!e.expose.count &amp;&amp; !(e.expose.x==0 &amp;&amp; e.expose.w&lt;=2)) <a class="code" href="struct_window.html#ae296facf4aba47238e946e966ea14f1f">needRender</a>=<span class="keyword">true</span>; }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(type==UnmapNotify) <a class="code" href="struct_window.html#aa22947de8865a70668deeb28a38e46a3">mapped</a>=<span class="keyword">false</span>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(type==MapNotify) <a class="code" href="struct_window.html#aa22947de8865a70668deeb28a38e46a3">mapped</a>=<span class="keyword">true</span>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(type==ReparentNotify) {}</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(type==ConfigureNotify) {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                <a class="code" href="struct_window.html#ac3105623c842ce7275e3798a91285ca1">position</a>=<a class="code" href="vector_8h.html#ac7a1b8f134bbc80aeed76cef94416cf2">int2</a>(e.configure.x,e.configure.y); <a class="code" href="structvec.html">int2</a> size=<a class="code" href="vector_8h.html#ac7a1b8f134bbc80aeed76cef94416cf2">int2</a>(e.configure.w,e.configure.h);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                <span class="keywordflow">if</span>(this-&gt;size!=size) { this-&gt;size=size; <a class="code" href="struct_window.html#ae296facf4aba47238e946e966ea14f1f">needRender</a>=<span class="keyword">true</span>; }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(type==GravityNotify) {}</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(type==ClientMessage) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                function&lt;void()&gt;* action = <a class="code" href="struct_window.html#a91045daaa903849946bd9530a71493bf">actions</a>.find(Escape); <span class="comment">// Translates to Escape keyPress event</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                <span class="keywordflow">if</span>(action) (*action)(); <span class="comment">// Local window action</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#a41da9bc5985dfb654faa6927a1a5d923">focus</a> &amp;&amp; <a class="code" href="struct_window.html#a41da9bc5985dfb654faa6927a1a5d923">focus</a>-&gt;<a class="code" href="struct_widget.html#a6c724859c52bf62948ef9b6ce0a1105c">keyPress</a>(Escape, NoModifiers)) ; <span class="comment">//needUpdate=true; //FIXME: Assumes all widgets supports partial updates</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                <span class="keywordflow">else</span> <a class="code" href="thread_8h.html#a660644fcee026e3f44448456eb771d0a">exit</a>(0); <span class="comment">// Exits application by default</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>( type==DestroyNotify || type==MappingNotify || type==LastEvent) {}</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <span class="keywordflow">else</span> <a class="code" href="core_8h.html#a6b44f30da7eefc7f476da6f15e9b6677">log</a>(<span class="stringliteral">&quot;Event&quot;</span>, type&lt;<span class="keyword">sizeof</span>(::events)/<span class="keyword">sizeof</span>(*::events)?::events[type]:str(type));</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        window=0;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;uint Window::send(<span class="keyword">const</span> <a class="code" href="structref.html">ref&lt;byte&gt;</a>&amp; request) { <a class="code" href="struct_stream.html#af3019ae0b9b7f16e8d4fef36311633d5">write</a>(request); <span class="keywordflow">return</span> ++sequence; }</div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="struct_window.html#a7415a431517b6200072c768a67e3be01">  270</a></span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; T <a class="code" href="struct_window.html#a7415a431517b6200072c768a67e3be01">Window::readReply</a>(<span class="keyword">const</span> <a class="code" href="structref.html">ref&lt;byte&gt;</a>&amp; request) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <a class="code" href="struct_locker.html">Locker</a> <a class="code" href="struct_window.html#aa3eaa4a595519c07fba8b63fddaf95af">lock</a>(this-&gt;<a class="code" href="struct_window.html#aa3eaa4a595519c07fba8b63fddaf95af">lock</a>); <span class="comment">// Prevents a concurrent thread from reading the reply</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    uint sequence = send(request);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordtype">bool</span> pendingEvents = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">for</span>(;;) { uint8 type = read&lt;uint8&gt;();</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">if</span>(type==0) {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            XError e=read&lt;XError&gt;(); <a class="code" href="struct_window.html#a8cfdd24f79ee7e187793fb5643edf33f">processEvent</a>(0,(XEvent&amp;)e);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <span class="keywordflow">if</span>(e.seq==sequence) { <span class="keywordflow">if</span>(pendingEvents) <a class="code" href="struct_poll.html#a0d3944c40c5bf892b0d8f44411456d79">queue</a>(); T t; <a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(t).clear(); <span class="keywordflow">return</span> t; }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(type==1) {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            T reply = read&lt;T&gt;();</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            assert(reply.seq==sequence);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <span class="keywordflow">if</span>(pendingEvents) <a class="code" href="struct_poll.html#a0d3944c40c5bf892b0d8f44411456d79">queue</a>();</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <span class="keywordflow">return</span> reply;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">else</span> { eventQueue &lt;&lt; QEvent{type, <a class="code" href="structunique.html">unique&lt;XEvent&gt;</a>(read&lt;XEvent&gt;())}; semaphore.<a class="code" href="struct_semaphore.html#a7cb3e72b2bcb92749173444abc3a15f5">release</a>(1); pendingEvents=<span class="keyword">true</span>; } <span class="comment">// Queues events to avoid reentrance</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;}</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="struct_window.html#a8f986e19a11c4c97ed8e6ad3d0e648b7">  289</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="struct_window.html#a8f986e19a11c4c97ed8e6ad3d0e648b7">Window::show</a>() {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#aa22947de8865a70668deeb28a38e46a3">mapped</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="struct_window.html#a3cae97a0cd0b6f7c78b63b6e49b0280d">created</a>) {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordflow">if</span>(size.x&lt;0||size.y&lt;0) {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <a class="code" href="structvec.html">int2</a> hint=<a class="code" href="struct_window.html#a982f4b64cdc6d79b9e66ffde645ed042">widget</a>-&gt;<a class="code" href="struct_widget.html#a67acadfee077131b97ff8a9d09661084">sizeHint</a>();</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <span class="keywordflow">if</span>(size.x&lt;0) size.x=max(abs(hint.x),-size.x);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            <span class="keywordflow">if</span>(size.y&lt;0) size.y=max(abs(hint.y),-size.y);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">if</span>(size.x==0 || size.x&gt;<a class="code" href="struct_window.html#afa9a5b47735a7fe05a70ac83fc9f463e">displaySize</a>.x) size.x=<a class="code" href="struct_window.html#afa9a5b47735a7fe05a70ac83fc9f463e">displaySize</a>.x;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="keywordflow">if</span>(size.y==0 || size.y&gt;<a class="code" href="struct_window.html#afa9a5b47735a7fe05a70ac83fc9f463e">displaySize</a>.y-16) size.y=<a class="code" href="struct_window.html#afa9a5b47735a7fe05a70ac83fc9f463e">displaySize</a>.y-16;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        {CreateWindow r; r.id=<span class="keywordtype">id</span>+XWindow; r.parent=<a class="code" href="struct_window.html#a298d320bc89f538a45f7549ca70e9d77">root</a>; r.x=<a class="code" href="struct_window.html#ac3105623c842ce7275e3798a91285ca1">position</a>.x; r.y=<a class="code" href="struct_window.html#ac3105623c842ce7275e3798a91285ca1">position</a>.y; r.width=size.x, r.height=size.y;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            r.visual=<a class="code" href="struct_window.html#a89ead7022781abfd6e933f850a08137f">visual</a>; r.colormap=<span class="keywordtype">id</span>+Colormap; r.overrideRedirect=<a class="code" href="struct_window.html#a45e6d4337c720ecb0f7597131468a2ef">overrideRedirect</a>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            r.eventMask=StructureNotifyMask|KeyPressMask|KeyReleaseMask|ButtonPressMask|ButtonReleaseMask</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                    |EnterWindowMask|LeaveWindowMask|PointerMotionMask|ExposureMask;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            send(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r));</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <a class="code" href="struct_window.html#a3cae97a0cd0b6f7c78b63b6e49b0280d">created</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        {CreateGC r; r.context=<span class="keywordtype">id</span>+GContext; r.window=<span class="keywordtype">id</span>+XWindow; send(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r));}</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        {ChangeProperty r; r.window=<span class="keywordtype">id</span>+XWindow; r.property=<a class="code" href="struct_window.html#a17d1a02df1c5c93366b4b462e6fc2c36">Atom</a>(<span class="stringliteral">&quot;WM_PROTOCOLS&quot;</span>_); r.type=<a class="code" href="struct_window.html#a17d1a02df1c5c93366b4b462e6fc2c36">Atom</a>(<span class="stringliteral">&quot;ATOM&quot;</span>_); r.format=32;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            r.length=1; r.size+=r.length; send(<a class="code" href="array_8h.html#afb917b998002d51b040b0b2205572517">String</a>(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r)+<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(<a class="code" href="struct_window.html#a17d1a02df1c5c93366b4b462e6fc2c36">Atom</a>(<span class="stringliteral">&quot;WM_DELETE_WINDOW&quot;</span>_))));}</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        {ChangeProperty r; r.window=<span class="keywordtype">id</span>+XWindow; r.property=<a class="code" href="struct_window.html#a17d1a02df1c5c93366b4b462e6fc2c36">Atom</a>(<span class="stringliteral">&quot;_KDE_OXYGEN_BACKGROUND_GRADIENT&quot;</span>_); r.type=<a class="code" href="struct_window.html#a17d1a02df1c5c93366b4b462e6fc2c36">Atom</a>(<span class="stringliteral">&quot;CARDINAL&quot;</span>_); r.format=32;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            r.length=1; r.size+=r.length; send(<a class="code" href="array_8h.html#afb917b998002d51b040b0b2205572517">String</a>(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r)+<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(1)));}</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <a class="code" href="struct_window.html#a467c751b44cf160248540ee5c8d83684">setTitle</a>(<a class="code" href="struct_window.html#a8106b7bc5759097e8c2ae91d36f236be">title</a>);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#a97e96ce9f330de05a3fb33b924bcfb70">icon</a>) <a class="code" href="struct_window.html#a0dc953c39eeb074f48bd5fb85c16eac2">setIcon</a>(<a class="code" href="struct_window.html#a97e96ce9f330de05a3fb33b924bcfb70">icon</a>);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    {MapWindow r; r.id=<a class="code" href="struct_window.html#a1753467627b029f9fec82d040e3efa5a">id</a>; send(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r));}</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    {RaiseWindow r; r.id=<a class="code" href="struct_window.html#a1753467627b029f9fec82d040e3efa5a">id</a>; send(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r));}</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;}</div>
<div class="line"><a name="l00317"></a><span class="lineno"><a class="line" href="struct_window.html#a4626829d3cb9d01285f739d2bbc69b74">  317</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="struct_window.html#a4626829d3cb9d01285f739d2bbc69b74">Window::hide</a>() { UnmapWindow r; r.id=<a class="code" href="struct_window.html#a1753467627b029f9fec82d040e3efa5a">id</a>; send(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r)); }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">// Configuration</span></div>
<div class="line"><a name="l00319"></a><span class="lineno"><a class="line" href="struct_window.html#a3bfbdcc73406b828e05c4c814d73d8bc">  319</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="struct_window.html#a3bfbdcc73406b828e05c4c814d73d8bc">Window::setPosition</a>(<a class="code" href="structvec.html">int2</a> position) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">if</span>(position.x&lt;0) position.x=<a class="code" href="struct_window.html#afa9a5b47735a7fe05a70ac83fc9f463e">displaySize</a>.x+position.x;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">if</span>(position.y&lt;0) position.y=<a class="code" href="struct_window.html#afa9a5b47735a7fe05a70ac83fc9f463e">displaySize</a>.y+position.y;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <a class="code" href="struct_window.html#af3c9f66f6c8c8648fe6a801f08d59c51">setGeometry</a>(position,this-&gt;size);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;}</div>
<div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="struct_window.html#ae332f4ec006bb674bcbd4bf261818122">  324</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="struct_window.html#ae332f4ec006bb674bcbd4bf261818122">Window::setSize</a>(<a class="code" href="structvec.html">int2</a> size) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">if</span>(size.x&lt;0||size.y&lt;0) {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <a class="code" href="structvec.html">int2</a> hint=<a class="code" href="struct_window.html#a982f4b64cdc6d79b9e66ffde645ed042">widget</a>-&gt;<a class="code" href="struct_widget.html#a67acadfee077131b97ff8a9d09661084">sizeHint</a>();</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">if</span>(size.x&lt;0) size.x=max(abs(hint.x),-size.x);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keywordflow">if</span>(size.y&lt;0) size.y=max(abs(hint.y),-size.y);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">if</span>(size.x==0 || size.x&gt;<a class="code" href="struct_window.html#afa9a5b47735a7fe05a70ac83fc9f463e">displaySize</a>.x) size.x=<a class="code" href="struct_window.html#afa9a5b47735a7fe05a70ac83fc9f463e">displaySize</a>.x;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">if</span>(size.y==0 || size.y&gt;<a class="code" href="struct_window.html#afa9a5b47735a7fe05a70ac83fc9f463e">displaySize</a>.y-16) size.y=<a class="code" href="struct_window.html#afa9a5b47735a7fe05a70ac83fc9f463e">displaySize</a>.y-16;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <a class="code" href="struct_window.html#af3c9f66f6c8c8648fe6a801f08d59c51">setGeometry</a>(this-&gt;<a class="code" href="struct_window.html#ac3105623c842ce7275e3798a91285ca1">position</a>,size);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;}</div>
<div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="struct_window.html#af3c9f66f6c8c8648fe6a801f08d59c51">  334</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="struct_window.html#af3c9f66f6c8c8648fe6a801f08d59c51">Window::setGeometry</a>(<a class="code" href="structvec.html">int2</a> position, <a class="code" href="structvec.html">int2</a> size) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#a87ea5751f55775de0f411d539f619acc">anchor</a>&amp;Left &amp;&amp; <a class="code" href="struct_window.html#a87ea5751f55775de0f411d539f619acc">anchor</a>&amp;Right) position.x=(<a class="code" href="struct_window.html#afa9a5b47735a7fe05a70ac83fc9f463e">displaySize</a>.x-size.x)/2;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#a87ea5751f55775de0f411d539f619acc">anchor</a>&amp;Left) position.x=0;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#a87ea5751f55775de0f411d539f619acc">anchor</a>&amp;Right) position.x=<a class="code" href="struct_window.html#afa9a5b47735a7fe05a70ac83fc9f463e">displaySize</a>.x-size.x;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#a87ea5751f55775de0f411d539f619acc">anchor</a>&amp;Top &amp;&amp; <a class="code" href="struct_window.html#a87ea5751f55775de0f411d539f619acc">anchor</a>&amp;Bottom) position.y=16+(<a class="code" href="struct_window.html#afa9a5b47735a7fe05a70ac83fc9f463e">displaySize</a>.y-16-size.y)/2;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#a87ea5751f55775de0f411d539f619acc">anchor</a>&amp;Top) position.y=16;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#a87ea5751f55775de0f411d539f619acc">anchor</a>&amp;Bottom) position.y=<a class="code" href="struct_window.html#afa9a5b47735a7fe05a70ac83fc9f463e">displaySize</a>.y-size.y;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="struct_window.html#a3cae97a0cd0b6f7c78b63b6e49b0280d">created</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">if</span>(position!=this-&gt;position &amp;&amp; size!=this-&gt;size) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        SetGeometry r; r.id=<span class="keywordtype">id</span>+XWindow; r.x=position.x; r.y=position.y; r.w=size.x, r.h=size.y; send(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r));</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(position!=this-&gt;position) {SetPosition r; r.id=<span class="keywordtype">id</span>+XWindow; r.x=position.x, r.y=position.y; send(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r));}</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(size!=this-&gt;size) {SetSize r; r.id=<span class="keywordtype">id</span>+XWindow; r.w=size.x, r.h=size.y; send(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r));}</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;}</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">// Keyboard</span></div>
<div class="line"><a name="l00350"></a><span class="lineno"><a class="line" href="struct_window.html#a8a198824af75674d41247259362cb7bc">  350</a></span>&#160;<a class="code" href="widget_8h.html#ab3c7af4820830f9166ede9e5623c4e73">Key</a> <a class="code" href="struct_window.html#a8a198824af75674d41247259362cb7bc">Window::KeySym</a>(uint8 code, uint8 state) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="comment">//FIXME: not atomic</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    GetKeyboardMapping req; GetKeyboardMappingReply r=readReply&lt;GetKeyboardMappingReply&gt;(({req.keycode=code; <a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(req);}));</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <a class="code" href="structbuffer.html">::buffer&lt;uint&gt;</a> keysyms = read&lt;uint&gt;(r.numKeySymsPerKeyCode);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">if</span>(!keysyms) <a class="code" href="core_8h.html#a582bff114cf268d287f9e7548d9fe6d1">error</a>(code,state);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">if</span>(keysyms.size&gt;=2 &amp;&amp; keysyms[1]&gt;=0xff80 &amp;&amp; keysyms[1]&lt;=0xffbd) state|=1;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="widget_8h.html#ab3c7af4820830f9166ede9e5623c4e73">Key</a>)keysyms[state&amp;1 &amp;&amp; keysyms.size&gt;=2];</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;}</div>
<div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="struct_window.html#a5b60543bfd05375a7b06a047a95c178e">  358</a></span>&#160;uint <a class="code" href="struct_window.html#a5b60543bfd05375a7b06a047a95c178e">Window::KeyCode</a>(<a class="code" href="widget_8h.html#ab3c7af4820830f9166ede9e5623c4e73">Key</a> sym) {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    uint keycode=0;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">for</span>(uint i: <a class="code" href="structrange.html">range</a>(<a class="code" href="struct_window.html#ad9c3e41989faec00c4eeaf6459eaadad">minKeyCode</a>,maxKeyCode+1)) <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#a8a198824af75674d41247259362cb7bc">KeySym</a>(i,0)==sym) { keycode=i; <span class="keywordflow">break</span>;  }</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">if</span>(!keycode) { <span class="keywordflow">if</span>(sym==0x1008ff14) <span class="keywordflow">return</span> 172; <span class="comment">/*FIXME*/</span> <a class="code" href="core_8h.html#a6b44f30da7eefc7f476da6f15e9b6677">log</a>(<span class="stringliteral">&quot;Unknown KeySym&quot;</span>,<span class="keywordtype">int</span>(sym)); <span class="keywordflow">return</span> sym; }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">return</span> keycode;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;}</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div>
<div class="line"><a name="l00365"></a><span class="lineno"><a class="line" href="struct_window.html#ad28a9c7669af6ac2cc8176a5727ecfdb">  365</a></span>&#160;function&lt;void()&gt;&amp; <a class="code" href="struct_window.html#ad28a9c7669af6ac2cc8176a5727ecfdb">Window::globalAction</a>(<a class="code" href="widget_8h.html#ab3c7af4820830f9166ede9e5623c4e73">Key</a> key) {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    uint code = <a class="code" href="struct_window.html#a5b60543bfd05375a7b06a047a95c178e">KeyCode</a>(key);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">if</span>(code){GrabKey r; r.window=<a class="code" href="struct_window.html#a298d320bc89f538a45f7549ca70e9d77">root</a>; r.keycode=code; send(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r));}</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="struct_window.html#a91045daaa903849946bd9530a71493bf">actions</a>.insert(key, []{});</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;}</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">// Properties</span></div>
<div class="line"><a name="l00372"></a><span class="lineno"><a class="line" href="struct_window.html#a17d1a02df1c5c93366b4b462e6fc2c36">  372</a></span>&#160;uint <a class="code" href="struct_window.html#a17d1a02df1c5c93366b4b462e6fc2c36">Window::Atom</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; name) {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    InternAtom r; r.length=name.size; r.size+=<a class="code" href="data_8h.html#aeda4f97fb92d2cd709c735708ee1ee35">align</a>(4,r.length)/4;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">return</span> readReply&lt;InternAtomReply&gt;(<a class="code" href="array_8h.html#afb917b998002d51b040b0b2205572517">String</a>(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r)+name+<a class="code" href="string_8h.html#a1976f658419b40f3427a65dcf354864e">pad</a>(4,r.length))).atom;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;}</div>
<div class="line"><a name="l00376"></a><span class="lineno"><a class="line" href="struct_window.html#a9d49335af19d03071545ed388bf73ed3">  376</a></span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <a class="code" href="structarray.html">array&lt;T&gt;</a> <a class="code" href="struct_window.html#a9d49335af19d03071545ed388bf73ed3">Window::getProperty</a>(uint window, <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; name, uint size) {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="comment">//FIXME: not atomic</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    GetProperty r; GetPropertyReply reply=readReply&lt;GetPropertyReply&gt;(({r.window=window; r.property=<a class="code" href="struct_window.html#a17d1a02df1c5c93366b4b462e6fc2c36">Atom</a>(name); r.length=size; <a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r); }));</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    {uint size=reply.length*reply.format/8;  <a class="code" href="structarray.html">array&lt;T&gt;</a> a; <span class="keywordflow">if</span>(size) a=read&lt;T&gt;(size/<span class="keyword">sizeof</span>(T)); <span class="keywordtype">int</span> <a class="code" href="string_8h.html#a1976f658419b40f3427a65dcf354864e">pad</a>=<a class="code" href="data_8h.html#aeda4f97fb92d2cd709c735708ee1ee35">align</a>(4,size)-size; <span class="keywordflow">if</span>(pad) <a class="code" href="struct_stream.html#a7b5f7c1782995c957e69bf8d212dface">read</a>(pad); <span class="keywordflow">return</span> a; }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;}</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="keyword">template</span> <a class="code" href="structarray.html">array&lt;uint&gt;</a> <a class="code" href="struct_window.html#a9d49335af19d03071545ed388bf73ed3">Window::getProperty</a>(uint window, <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; name, uint size);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="keyword">template</span> <a class="code" href="structarray.html">array&lt;byte&gt;</a> <a class="code" href="struct_window.html#a9d49335af19d03071545ed388bf73ed3">Window::getProperty</a>(uint window, <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; name, uint size);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div>
<div class="line"><a name="l00384"></a><span class="lineno"><a class="line" href="struct_window.html#a35ea9e866d78669be38a4e4a1145ba34">  384</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="struct_window.html#a35ea9e866d78669be38a4e4a1145ba34">Window::setType</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; type) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    ChangeProperty r; r.window=<span class="keywordtype">id</span>+XWindow; r.property=<a class="code" href="struct_window.html#a17d1a02df1c5c93366b4b462e6fc2c36">Atom</a>(<span class="stringliteral">&quot;_NET_WM_WINDOW_TYPE&quot;</span>_); r.type=<a class="code" href="struct_window.html#a17d1a02df1c5c93366b4b462e6fc2c36">Atom</a>(<span class="stringliteral">&quot;ATOM&quot;</span>_); r.format=32;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    r.length=1; r.size+=r.length; send(<a class="code" href="array_8h.html#afb917b998002d51b040b0b2205572517">String</a>(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r)+<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(<a class="code" href="struct_window.html#a17d1a02df1c5c93366b4b462e6fc2c36">Atom</a>(type))));</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;}</div>
<div class="line"><a name="l00388"></a><span class="lineno"><a class="line" href="struct_window.html#a467c751b44cf160248540ee5c8d83684">  388</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="struct_window.html#a467c751b44cf160248540ee5c8d83684">Window::setTitle</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; title) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    this-&gt;title = <a class="code" href="array_8h.html#a85e80f75a8e14e2250549c29cf403768">copy</a>(<a class="code" href="array_8h.html#afb917b998002d51b040b0b2205572517">String</a>(title));</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="struct_window.html#a3cae97a0cd0b6f7c78b63b6e49b0280d">created</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    ChangeProperty r; r.window=<span class="keywordtype">id</span>+XWindow; r.property=<a class="code" href="struct_window.html#a17d1a02df1c5c93366b4b462e6fc2c36">Atom</a>(<span class="stringliteral">&quot;_NET_WM_NAME&quot;</span>_); r.type=<a class="code" href="struct_window.html#a17d1a02df1c5c93366b4b462e6fc2c36">Atom</a>(<span class="stringliteral">&quot;UTF8_STRING&quot;</span>_); r.format=8;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    r.length=title.size; r.size+=<a class="code" href="data_8h.html#aeda4f97fb92d2cd709c735708ee1ee35">align</a>(4, r.length)/4; send(<a class="code" href="array_8h.html#afb917b998002d51b040b0b2205572517">String</a>(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r)+title+<a class="code" href="string_8h.html#a1976f658419b40f3427a65dcf354864e">pad</a>(4,title.size)));</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;}</div>
<div class="line"><a name="l00394"></a><span class="lineno"><a class="line" href="struct_window.html#a0dc953c39eeb074f48bd5fb85c16eac2">  394</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="struct_window.html#a0dc953c39eeb074f48bd5fb85c16eac2">Window::setIcon</a>(<span class="keyword">const</span> <a class="code" href="struct_image.html">Image</a>&amp; icon) {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    this-&gt;icon = <a class="code" href="array_8h.html#a85e80f75a8e14e2250549c29cf403768">copy</a>(icon);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="struct_window.html#a3cae97a0cd0b6f7c78b63b6e49b0280d">created</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    ChangeProperty r; r.window=<span class="keywordtype">id</span>+XWindow; r.property=<a class="code" href="struct_window.html#a17d1a02df1c5c93366b4b462e6fc2c36">Atom</a>(<span class="stringliteral">&quot;_NET_WM_ICON&quot;</span>_); r.type=<a class="code" href="struct_window.html#a17d1a02df1c5c93366b4b462e6fc2c36">Atom</a>(<span class="stringliteral">&quot;CARDINAL&quot;</span>_); r.format=32;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    r.length=2+icon.width*icon.height; r.size+=r.length; send(<a class="code" href="array_8h.html#afb917b998002d51b040b0b2205572517">String</a>(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r)+<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(icon.width)+<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(icon.height)+(<a class="code" href="structref.html">ref&lt;byte&gt;</a>)icon));</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;}</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div>
<div class="line"><a name="l00401"></a><span class="lineno"><a class="line" href="struct_window.html#a888d10c70c24a190d015839d2b6d77b2">  401</a></span>&#160;<a class="code" href="structarray.html">String</a> <a class="code" href="struct_window.html#a888d10c70c24a190d015839d2b6d77b2">Window::getSelection</a>(<span class="keywordtype">bool</span> clipboard) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    GetSelectionOwner r;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    uint owner = readReply&lt;GetSelectionOwnerReply&gt;(({ <span class="keywordflow">if</span>(clipboard) r.selection=<a class="code" href="struct_window.html#a17d1a02df1c5c93366b4b462e6fc2c36">Atom</a>(<span class="stringliteral">&quot;CLIPBOARD&quot;</span>_); <a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r); })).owner;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">if</span>(!owner) <span class="keywordflow">return</span> <a class="code" href="array_8h.html#afb917b998002d51b040b0b2205572517">String</a>();</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    {ConvertSelection r; r.requestor=<a class="code" href="struct_window.html#a1753467627b029f9fec82d040e3efa5a">id</a>; <span class="keywordflow">if</span>(clipboard) r.selection=<a class="code" href="struct_window.html#a17d1a02df1c5c93366b4b462e6fc2c36">Atom</a>(<span class="stringliteral">&quot;CLIPBOARD&quot;</span>_); r.target=<a class="code" href="struct_window.html#a17d1a02df1c5c93366b4b462e6fc2c36">Atom</a>(<span class="stringliteral">&quot;UTF8_STRING&quot;</span>_); send(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r));}</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordtype">bool</span> pendingEvents = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="struct_locker.html">Locker</a> <a class="code" href="struct_window.html#aa3eaa4a595519c07fba8b63fddaf95af">lock</a>(this-&gt;<a class="code" href="struct_window.html#aa3eaa4a595519c07fba8b63fddaf95af">lock</a>);;) { <span class="comment">// Lock prevents a concurrent thread from reading the SelectionNotify</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        uint8 type = read&lt;uint8&gt;();</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="keywordflow">if</span>((type&amp;0b01111111)==SelectionNotify) { read&lt;XEvent&gt;(); <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        eventQueue &lt;&lt; QEvent{type, <a class="code" href="structunique.html">unique&lt;XEvent&gt;</a>(read&lt;XEvent&gt;())};</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        semaphore.<a class="code" href="struct_semaphore.html#a7cb3e72b2bcb92749173444abc3a15f5">release</a>(1);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        pendingEvents = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">if</span>(pendingEvents) <a class="code" href="struct_poll.html#a0d3944c40c5bf892b0d8f44411456d79">queue</a>();</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">return</span> getProperty&lt;byte&gt;(<a class="code" href="struct_window.html#a1753467627b029f9fec82d040e3efa5a">id</a>,<span class="stringliteral">&quot;UTF8_STRING&quot;</span>_);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;}</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div>
<div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="struct_window.html#a5bd9450a50bc2dc26adbef5f55391a1b">  418</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="struct_window.html#a5bd9450a50bc2dc26adbef5f55391a1b">Window::setCursor</a>(<a class="code" href="widget_8h.html#ac9c915d433bdce7b6b47c0956c850f43">Cursor</a>) {}</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">// Snapshot</span></div>
<div class="line"><a name="l00421"></a><span class="lineno"><a class="line" href="struct_window.html#a0436f210b321c1d7a105c90227605df7">  421</a></span>&#160;<a class="code" href="struct_image.html">Image</a> <a class="code" href="struct_window.html#a0436f210b321c1d7a105c90227605df7">Window::getSnapshot</a>() {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <a class="code" href="core_8h.html#a2e35c3438d8d47b88bd399ee34e1028a">assert_</a>(!<a class="code" href="struct_window.html#a26f92f63d42f5ca2ab6aa87c1143080d">remote</a>);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <a class="code" href="struct_image.html">Image</a> <a class="code" href="structbuffer.html">buffer</a>;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    buffer.stride=buffer.width=<a class="code" href="struct_window.html#afa9a5b47735a7fe05a70ac83fc9f463e">displaySize</a>.x, buffer.height=<a class="code" href="struct_window.html#afa9a5b47735a7fe05a70ac83fc9f463e">displaySize</a>.y;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_window.html#af4cb9ddb3056aab85fb9e3d5ed940b36">shm</a> = <a class="code" href="file_8h.html#ad550f6b197466e8ae37371ca8bee8e4d">check</a>( shmget(0, buffer.height*buffer.stride*<span class="keyword">sizeof</span>(<a class="code" href="structvec.html">byte4</a>) , IPC_CREAT | 0777) );</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    buffer.data = (<a class="code" href="structvec.html">byte4</a>*)<a class="code" href="file_8h.html#ad550f6b197466e8ae37371ca8bee8e4d">check</a>( shmat(shm, 0, 0) ); assert(buffer.data);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    {Shm::Attach r; r.seg=<span class="keywordtype">id</span>+SnapshotSegment; r.shm=<a class="code" href="struct_window.html#af4cb9ddb3056aab85fb9e3d5ed940b36">shm</a>; send(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r));}</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    {Shm::GetImage r; r.window=<a class="code" href="struct_window.html#a298d320bc89f538a45f7549ca70e9d77">root</a>; r.w=buffer.width, r.h=buffer.height; r.seg=<span class="keywordtype">id</span>+SnapshotSegment; readReply&lt;Shm::GetImageReply&gt;(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r));}</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    {Shm::Detach r; r.seg=<span class="keywordtype">id</span>+SnapshotSegment; send(<a class="code" href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a>(r));}</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <a class="code" href="struct_image.html">Image</a> image = <a class="code" href="array_8h.html#a85e80f75a8e14e2250549c29cf403768">copy</a>(buffer);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">for</span>(uint y: <a class="code" href="structrange.html">range</a>(image.height)) <span class="keywordflow">for</span>(uint x: <a class="code" href="structrange.html">range</a>(image.width)) {<a class="code" href="structvec.html">byte4</a>&amp; p=image(x,y); p.a=0xFF;}</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    shmdt(buffer.data);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    shmctl(shm, IPC_RMID, 0);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">return</span> image;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;}</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div>
<div class="line"><a name="l00437"></a><span class="lineno"><a class="line" href="struct_window.html#a063b7ffff0eb311262f566238362cf1b">  437</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="struct_window.html#a063b7ffff0eb311262f566238362cf1b">Window::setDisplay</a>(<span class="keywordtype">bool</span> displayState) { <a class="code" href="core_8h.html#a6b44f30da7eefc7f476da6f15e9b6677">log</a>(<span class="stringliteral">&quot;Unimplemented X11 setDisplay&quot;</span>, displayState); }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00440"></a><span class="lineno"><a class="line" href="struct_window.html#a887f6b512172fbb2e0cb1df05e8c2a91">  440</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="struct_window.html#a887f6b512172fbb2e0cb1df05e8c2a91">Window::renderBackground</a>(<a class="code" href="struct_image.html">Image</a>&amp; target) {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <a class="code" href="core_8h.html#a2e35c3438d8d47b88bd399ee34e1028a">assert_</a>(target.data &gt;= this-&gt;target.buffer.begin() &amp;&amp; target.data+target.height*target.stride &lt;= this-&gt;target.buffer.end());</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">if</span>(background==Oxygen) { <span class="comment">// Oxygen-like radial gradient background</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <a class="code" href="core_8h.html#a2e35c3438d8d47b88bd399ee34e1028a">assert_</a>(target.size() == this-&gt;target.size());</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> y0 = -32-8, splitY = min(300, 3*size.y/4);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keyword">const</span> <a class="code" href="structvec.html">vec3</a> radial = <a class="code" href="structvec.html">vec3</a>(246./255); <span class="comment">// linear</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keyword">const</span> <a class="code" href="structvec.html">vec3</a> top = <a class="code" href="structvec.html">vec3</a>(221, 223, 225); <span class="comment">// sRGB</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <span class="keyword">const</span> <a class="code" href="structvec.html">vec3</a> bottom = <a class="code" href="structvec.html">vec3</a>(184, 187, 194); <span class="comment">// sRGB</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keyword">const</span> <a class="code" href="structvec.html">vec3</a> middle = (bottom+top)/2.f; <span class="comment">//FIXME</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="comment">// Draws upper linear gradient</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y: <a class="code" href="structrange.html">range</a>(0, max(0, y0+splitY/2))) {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            <span class="keywordtype">float</span> t = (float) (y-y0) / (splitY/2);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x: <a class="code" href="structrange.html">range</a>(size.x)) <a class="code" href="struct_window.html#af4c1dc7698860bf05ed683da9275819b">target</a>(x,y) = <a class="code" href="vector_8h.html#a914d5191de64e7c66a2a471f339a67a6">byte4</a>(<a class="code" href="vector_8h.html#a3efb4ae786e9f0978d02ca3d3ab1234a">byte3</a>(round((1-t)*top + t*middle)), 0xFF);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y: <a class="code" href="structrange.html">range</a>(max(0, y0+splitY/2), min(size.y, y0+splitY))) {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            <span class="keywordtype">float</span> t = (float) (y- (y0 + splitY/2)) / (splitY/2);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            <a class="code" href="structvec.html">byte4</a> verticalGradient (<a class="code" href="vector_8h.html#a3efb4ae786e9f0978d02ca3d3ab1234a">byte3</a>((1-t)*middle + t*bottom), 0xFF); <span class="comment">// mid -&gt; dark</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x: <a class="code" href="structrange.html">range</a>(size.x)) <a class="code" href="struct_window.html#af4c1dc7698860bf05ed683da9275819b">target</a>(x,y) = verticalGradient;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="comment">// Draws lower flat part</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y: <a class="code" href="structrange.html">range</a>(max(0, y0+splitY), size.y)) <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x: <a class="code" href="structrange.html">range</a>(size.x)) <a class="code" href="struct_window.html#af4c1dc7698860bf05ed683da9275819b">target</a>(x,y) = <a class="code" href="vector_8h.html#a914d5191de64e7c66a2a471f339a67a6">byte4</a>(<a class="code" href="vector_8h.html#a3efb4ae786e9f0978d02ca3d3ab1234a">byte3</a>(bottom), 0xFF);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="comment">// Draws upper radial gradient (600x64)</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> w = min(600, size.x), h = 64;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y: <a class="code" href="structrange.html">range</a>(0, min(size.y, y0+h))) <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x: <a class="code" href="structrange.html">range</a>((size.x-w)/2, (size.x+w)/2)) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> cx = size.x/2, cy = y0+h/2;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            <span class="keywordtype">float</span> r = sqrt(sq((x-cx)/(w/2)) + sq((y-cy)/(h/2)));</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> r0 = 0./4, r1 = 2./4, r2 = 3./4, r3 = 4./4;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> a0 = 255./255, a1 = 101./255, a2 = 37./255, a3 = 0./255;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="comment">/***/</span> <span class="keywordflow">if</span>(r &lt; r1) { <span class="keywordtype">float</span> t = (r-r0) / (r1-r0); <a class="code" href="graphics_8h.html#ae9e1e766b95ad707f72cd29a46064e2c">blend</a>(target, x, y, radial, (1-t)*a0 + t*a1); }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(r &lt; r2) { <span class="keywordtype">float</span> t = (r-r1) / (r2-r1); <a class="code" href="graphics_8h.html#ae9e1e766b95ad707f72cd29a46064e2c">blend</a>(target, x, y, radial, (1-t)*a1 + t*a2); }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(r &lt; r3) { <span class="keywordtype">float</span> t = (r-r2) / (r3-r2); <a class="code" href="graphics_8h.html#ae9e1e766b95ad707f72cd29a46064e2c">blend</a>(target, x, y, radial, (1-t)*a2 + t*a3); }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(background==White) <a class="code" href="graphics_8h.html#a6ecff8c47477caed3bc7851ccf37e95b">fill</a>(target, <a class="code" href="struct_rect.html">Rect</a>(target.size()), white);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(background==Black)  <a class="code" href="graphics_8h.html#a6ecff8c47477caed3bc7851ccf37e95b">fill</a>(target, <a class="code" href="struct_rect.html">Rect</a>(target.size()), black);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;}</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="keywordtype">void</span> Window::keyPress(<a class="code" href="widget_8h.html#ab3c7af4820830f9166ede9e5623c4e73">Key</a> key, Modifiers modifiers) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#a41da9bc5985dfb654faa6927a1a5d923">focus</a> &amp;&amp; <a class="code" href="struct_window.html#a41da9bc5985dfb654faa6927a1a5d923">focus</a>-&gt;<a class="code" href="struct_widget.html#a6c724859c52bf62948ef9b6ce0a1105c">keyPress</a>(key, modifiers)) ; <span class="comment">//needUpdate=true; //FIXME: Assumes all widgets supports partial updates; Normal keyPress event</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        function&lt;void()&gt;* action = <a class="code" href="struct_window.html#a91045daaa903849946bd9530a71493bf">actions</a>.find(key);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        function&lt;void()&gt;* longAction = <a class="code" href="struct_window.html#a36da1d81135f1f97355b6fa5d50374ee">longActions</a>.find(key);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keywordflow">if</span>(longAction) { <span class="comment">// Schedules long action</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            <a class="code" href="struct_window.html#af7d58841d3d0a3ed7f30ce3636840f3a">longActionTimers</a>.insert(key, <a class="code" href="structunique.html">unique&lt;Timer&gt;</a>(1000, [<span class="keyword">this</span>,key,longAction]{<a class="code" href="struct_window.html#af7d58841d3d0a3ed7f30ce3636840f3a">longActionTimers</a>.remove(key); (*longAction)();}));</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        }</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(action) (*action)(); <span class="comment">// Local window action</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    }</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;}</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="keywordtype">void</span> Window::keyRelease(<a class="code" href="widget_8h.html#ab3c7af4820830f9166ede9e5623c4e73">Key</a> key, Modifiers modifiers) {</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#a41da9bc5985dfb654faa6927a1a5d923">focus</a> &amp;&amp; <a class="code" href="struct_window.html#a41da9bc5985dfb654faa6927a1a5d923">focus</a>-&gt;keyRelease(key, modifiers)) ; <span class="comment">//needUpdate=true; //FIXME: Assumes all widgets supports partial updates; Normal keyRelease event</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="struct_window.html#af7d58841d3d0a3ed7f30ce3636840f3a">longActionTimers</a>.contains(key)) {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <a class="code" href="struct_window.html#af7d58841d3d0a3ed7f30ce3636840f3a">longActionTimers</a>.remove(key); <span class="comment">// Removes long action before it triggers</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        function&lt;void()&gt;* action = <a class="code" href="struct_window.html#a91045daaa903849946bd9530a71493bf">actions</a>.find(key);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="keywordflow">if</span>(action) (*action)(); <span class="comment">// Executes any short action instead</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;}</div>
<div class="ttc" id="struct_lock_html_a9274a7e20cd5884ea268698d6db8eed6"><div class="ttname"><a href="struct_lock.html#a9274a7e20cd5884ea268698d6db8eed6">Lock::lock</a></div><div class="ttdeci">void lock()</div><div class="ttdoc">Locks the mutex. </div><div class="ttdef"><b>Definition:</b> <a href="thread_8h_source.html#l00024">thread.h:24</a></div></div>
<div class="ttc" id="structarray_html_a8d10b69ad58f0384b80683614ece97bf"><div class="ttname"><a href="structarray.html#a8d10b69ad58f0384b80683614ece97bf">array::take</a></div><div class="ttdeci">T take(int index)</div><div class="ttdoc">Removes one element at index and returns its value. </div><div class="ttdef"><b>Definition:</b> <a href="array_8h_source.html#l00082">array.h:82</a></div></div>
<div class="ttc" id="struct_window_html_ae2197177bf94e4a5f9964683be916969"><div class="ttname"><a href="struct_window.html#ae2197177bf94e4a5f9964683be916969">Window::dragStart</a></div><div class="ttdeci">int2 dragStart</div><div class="ttdoc">Drag state. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00083">window.h:83</a></div></div>
<div class="ttc" id="struct_widget_html_a6c724859c52bf62948ef9b6ce0a1105c"><div class="ttname"><a href="struct_widget.html#a6c724859c52bf62948ef9b6ce0a1105c">Widget::keyPress</a></div><div class="ttdeci">virtual bool keyPress(Key key, Modifiers modifiers)</div><div class="ttdef"><b>Definition:</b> <a href="widget_8h_source.html#l00058">widget.h:58</a></div></div>
<div class="ttc" id="struct_lock_html_a99860d8e0b2fa7d0d2d77fd1dbb05ce3"><div class="ttname"><a href="struct_lock.html#a99860d8e0b2fa7d0d2d77fd1dbb05ce3">Lock::unlock</a></div><div class="ttdeci">void unlock()</div><div class="ttdoc">Unlocks the mutex. </div><div class="ttdef"><b>Definition:</b> <a href="thread_8h_source.html#l00028">thread.h:28</a></div></div>
<div class="ttc" id="struct_window_html_a4626829d3cb9d01285f739d2bbc69b74"><div class="ttname"><a href="struct_window.html#a4626829d3cb9d01285f739d2bbc69b74">Window::hide</a></div><div class="ttdeci">void hide()</div><div class="ttdoc">Hides window. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00317">window.cc:317</a></div></div>
<div class="ttc" id="file_8h_html_a5d8b42126bb79aba2ced6845f91d2e09"><div class="ttname"><a href="file_8h.html#a5d8b42126bb79aba2ced6845f91d2e09">readFile</a></div><div class="ttdeci">buffer&lt; byte &gt; readFile(const string &amp;path, const Folder &amp;at=currentWorkingDirectory())</div><div class="ttdoc">Reads whole file content. </div><div class="ttdef"><b>Definition:</b> <a href="file_8cc_source.html#l00097">file.cc:97</a></div></div>
<div class="ttc" id="struct_window_html_a984a75320e72593920be4d36bf46112e"><div class="ttname"><a href="struct_window.html#a984a75320e72593920be4d36bf46112e">Window::renderLock</a></div><div class="ttdeci">Lock renderLock</div><div class="ttdoc">Synchronizes access to target buffer, Widgets need to lock before accessing their target pointer as i...</div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00148">window.h:148</a></div></div>
<div class="ttc" id="trace_8h_html"><div class="ttname"><a href="trace_8h.html">trace.h</a></div><div class="ttdoc">stack trace using ELF/DWARF debug informations </div></div>
<div class="ttc" id="png_8h_html_a4ee755075a1ea4ce09f8285ecc27f6a0"><div class="ttname"><a href="png_8h.html#a4ee755075a1ea4ce09f8285ecc27f6a0">encodePNG</a></div><div class="ttdeci">buffer&lt; byte &gt; encodePNG(const Image &amp;image)</div><div class="ttdoc">Encodes image using the Portable Network Graphics standard. </div><div class="ttdef"><b>Definition:</b> <a href="png_8cc_source.html#l00161">png.cc:161</a></div></div>
<div class="ttc" id="window_8h_html"><div class="ttname"><a href="window_8h.html">window.h</a></div><div class="ttdoc">X11 window display and input. </div></div>
<div class="ttc" id="widget_8h_html_a19fc7ca5f53c096de1d8764446eb918a"><div class="ttname"><a href="widget_8h.html#a19fc7ca5f53c096de1d8764446eb918a">hasFocus</a></div><div class="ttdeci">bool hasFocus(Widget *widget)</div><div class="ttdoc">Returns whether this widget has the keyboard focus. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00008">window.cc:8</a></div></div>
<div class="ttc" id="png_8h_html"><div class="ttname"><a href="png_8h.html">png.h</a></div><div class="ttdoc">PNG codec. </div></div>
<div class="ttc" id="struct_window_html_a124c62a004dee1f7795e2d3fb382c4fc"><div class="ttname"><a href="struct_window.html#a124c62a004dee1f7795e2d3fb382c4fc">Window::directInput</a></div><div class="ttdeci">Widget * directInput</div><div class="ttdoc">Current widget that gets keyboard events reported without modifiers (when in focus) ...</div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00062">window.h:62</a></div></div>
<div class="ttc" id="struct_window_html_a7415a431517b6200072c768a67e3be01"><div class="ttname"><a href="struct_window.html#a7415a431517b6200072c768a67e3be01">Window::readReply</a></div><div class="ttdeci">T readReply(const ref&lt; byte &gt; &amp;request)</div><div class="ttdoc">Reads an X reply (checks for errors and queue events) </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00270">window.cc:270</a></div></div>
<div class="ttc" id="time_8h_html"><div class="ttname"><a href="time_8h.html">time.h</a></div><div class="ttdoc">Time and date operations. </div></div>
<div class="ttc" id="struct_window_html_ae3746e43d9b0727a5310c5cfda884934"><div class="ttname"><a href="struct_window.html#ae3746e43d9b0727a5310c5cfda884934">Window::displayed</a></div><div class="ttdeci">function&lt; void()&gt; displayed</div><div class="ttdoc">Signals displayed updates. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00136">window.h:136</a></div></div>
<div class="ttc" id="struct_window_html_a0dc953c39eeb074f48bd5fb85c16eac2"><div class="ttname"><a href="struct_window.html#a0dc953c39eeb074f48bd5fb85c16eac2">Window::setIcon</a></div><div class="ttdeci">void setIcon(const Image &amp;icon)</div><div class="ttdoc">Sets window icon to icon. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00394">window.cc:394</a></div></div>
<div class="ttc" id="struct_socket_html"><div class="ttname"><a href="struct_socket.html">Socket</a></div><div class="ttdoc">Handle to a socket. </div><div class="ttdef"><b>Definition:</b> <a href="file_8h_source.html#l00082">file.h:82</a></div></div>
<div class="ttc" id="struct_window_html_ad28a9c7669af6ac2cc8176a5727ecfdb"><div class="ttname"><a href="struct_window.html#ad28a9c7669af6ac2cc8176a5727ecfdb">Window::globalAction</a></div><div class="ttdeci">function&lt; void()&gt; &amp; globalAction(Key)</div><div class="ttdoc">Registers global action on key. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00365">window.cc:365</a></div></div>
<div class="ttc" id="struct_window_html_ac3105623c842ce7275e3798a91285ca1"><div class="ttname"><a href="struct_window.html#ac3105623c842ce7275e3798a91285ca1">Window::position</a></div><div class="ttdeci">int2 position</div><div class="ttdoc">Geometry. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00048">window.h:48</a></div></div>
<div class="ttc" id="struct_window_html_a9d49335af19d03071545ed388bf73ed3"><div class="ttname"><a href="struct_window.html#a9d49335af19d03071545ed388bf73ed3">Window::getProperty</a></div><div class="ttdeci">array&lt; T &gt; getProperty(uint window, const string &amp;name, uint size=2+128 *128)</div><div class="ttdoc">Returns property name on window. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00376">window.cc:376</a></div></div>
<div class="ttc" id="struct_image_html"><div class="ttname"><a href="struct_image.html">Image</a></div><div class="ttdoc">2D array of byte4 </div><div class="ttdef"><b>Definition:</b> <a href="image_8h_source.html#l00027">image.h:27</a></div></div>
<div class="ttc" id="core_8h_html_a6b44f30da7eefc7f476da6f15e9b6677"><div class="ttname"><a href="core_8h.html#a6b44f30da7eefc7f476da6f15e9b6677">log</a></div><div class="ttdeci">void log(const Args &amp;...args)</div><div class="ttdoc">Logs a message to standard output. </div><div class="ttdef"><b>Definition:</b> <a href="string_8h_source.html#l00135">string.h:135</a></div></div>
<div class="ttc" id="struct_window_html_abf8ec3917eb630f778b33f0d0d43c181"><div class="ttname"><a href="struct_window.html#abf8ec3917eb630f778b33f0d0d43c181">Window::cursorPosition</a></div><div class="ttdeci">int2 cursorPosition</div><div class="ttdoc">Current cursor position &amp; state. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00064">window.h:64</a></div></div>
<div class="ttc" id="data_8h_html"><div class="ttname"><a href="data_8h.html">data.h</a></div><div class="ttdoc">Structured data parsers (Data, BinaryData, TextData) </div></div>
<div class="ttc" id="struct_window_html_a063b7ffff0eb311262f566238362cf1b"><div class="ttname"><a href="struct_window.html#a063b7ffff0eb311262f566238362cf1b">Window::setDisplay</a></div><div class="ttdeci">void setDisplay(bool displayState)</div><div class="ttdoc">Sets display state. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00437">window.cc:437</a></div></div>
<div class="ttc" id="struct_window_html_a294e8b7c0eb59d515f1072964ba4ea78"><div class="ttname"><a href="struct_window.html#a294e8b7c0eb59d515f1072964ba4ea78">Window::drag</a></div><div class="ttdeci">Widget * drag</div><div class="ttdoc">Current widget that has the drag focus. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00060">window.h:60</a></div></div>
<div class="ttc" id="struct_window_html_a8106b7bc5759097e8c2ae91d36f236be"><div class="ttname"><a href="struct_window.html#a8106b7bc5759097e8c2ae91d36f236be">Window::title</a></div><div class="ttdeci">String title</div><div class="ttdoc">Title (for snapshots) </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00050">window.h:50</a></div></div>
<div class="ttc" id="struct_window_html_af3c9f66f6c8c8648fe6a801f08d59c51"><div class="ttname"><a href="struct_window.html#af3c9f66f6c8c8648fe6a801f08d59c51">Window::setGeometry</a></div><div class="ttdeci">void setGeometry(int2 position, int2 size)</div><div class="ttdoc">Moves window to position and resizes to size in one request. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00334">window.cc:334</a></div></div>
<div class="ttc" id="struct_window_html_a9b1e832c4b75ffcaf1c5aa6ec0bb2cd8"><div class="ttname"><a href="struct_window.html#a9b1e832c4b75ffcaf1c5aa6ec0bb2cd8">Window::hideOnLeave</a></div><div class="ttdeci">bool hideOnLeave</div><div class="ttdoc">If set, this window will hide on leave events (e.g for dropdown menus) </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00127">window.h:127</a></div></div>
<div class="ttc" id="struct_window_html_a467c751b44cf160248540ee5c8d83684"><div class="ttname"><a href="struct_window.html#a467c751b44cf160248540ee5c8d83684">Window::setTitle</a></div><div class="ttdeci">void setTitle(const string &amp;title)</div><div class="ttdoc">Sets window title to title. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00388">window.cc:388</a></div></div>
<div class="ttc" id="struct_window_html_a97e96ce9f330de05a3fb33b924bcfb70"><div class="ttname"><a href="struct_window.html#a97e96ce9f330de05a3fb33b924bcfb70">Window::icon</a></div><div class="ttdeci">Image icon</div><div class="ttdoc">Icon. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00052">window.h:52</a></div></div>
<div class="ttc" id="struct_window_html_aa3eaa4a595519c07fba8b63fddaf95af"><div class="ttname"><a href="struct_window.html#aa3eaa4a595519c07fba8b63fddaf95af">Window::lock</a></div><div class="ttdeci">Lock lock</div><div class="ttdoc">Synchronizes access to connection, event queue. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00146">window.h:146</a></div></div>
<div class="ttc" id="struct_window_html_a460be572232c0d9fc2747de692d1c17a"><div class="ttname"><a href="struct_window.html#a460be572232c0d9fc2747de692d1c17a">Window::cursor</a></div><div class="ttdeci">Cursor cursor</div><div class="ttdoc">Current cursor. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00067">window.h:67</a></div></div>
<div class="ttc" id="structref_html"><div class="ttname"><a href="structref.html">ref&lt; byte &gt;</a></div></div>
<div class="ttc" id="struct_semaphore_html_a7cb3e72b2bcb92749173444abc3a15f5"><div class="ttname"><a href="struct_semaphore.html#a7cb3e72b2bcb92749173444abc3a15f5">Semaphore::release</a></div><div class="ttdeci">void release(int64 count)</div><div class="ttdoc">Releases count ressources. </div><div class="ttdef"><b>Definition:</b> <a href="thread_8h_source.html#l00067">thread.h:67</a></div></div>
<div class="ttc" id="struct_window_html_a89ead7022781abfd6e933f850a08137f"><div class="ttname"><a href="struct_window.html#a89ead7022781abfd6e933f850a08137f">Window::visual</a></div><div class="ttdeci">uint visual</div><div class="ttdoc">Root visual. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00141">window.h:141</a></div></div>
<div class="ttc" id="file_8h_html"><div class="ttname"><a href="file_8h.html">file.h</a></div><div class="ttdoc">Unix stream I/O and file system abstraction (Handle, Folder, Stream, Socket, File, Device, Map) </div></div>
<div class="ttc" id="struct_stream_html_a6cda41b17cf9fb7243a71a4d26b13377"><div class="ttname"><a href="struct_stream.html#a6cda41b17cf9fb7243a71a4d26b13377">Stream::poll</a></div><div class="ttdeci">bool poll(int timeout=0)</div><div class="ttdoc">Polls whether reading would block. </div><div class="ttdef"><b>Definition:</b> <a href="file_8cc_source.html#l00076">file.cc:76</a></div></div>
<div class="ttc" id="array_8h_html_a85e80f75a8e14e2250549c29cf403768"><div class="ttname"><a href="array_8h.html#a85e80f75a8e14e2250549c29cf403768">copy</a></div><div class="ttdeci">array&lt; T &gt; copy(const array&lt; T &gt; &amp;o)</div><div class="ttdoc">Copies all elements in a new array. </div><div class="ttdef"><b>Definition:</b> <a href="array_8h_source.html#l00120">array.h:120</a></div></div>
<div class="ttc" id="string_8h_html_a1976f658419b40f3427a65dcf354864e"><div class="ttname"><a href="string_8h.html#a1976f658419b40f3427a65dcf354864e">pad</a></div><div class="ttdeci">String pad(const string &amp;s, uint length, const string &amp;pad=&quot; &quot;)</div><div class="ttdoc">Pads a string. </div><div class="ttdef"><b>Definition:</b> <a href="string_8cc_source.html#l00176">string.cc:176</a></div></div>
<div class="ttc" id="struct_window_html_a26f92f63d42f5ca2ab6aa87c1143080d"><div class="ttname"><a href="struct_window.html#a26f92f63d42f5ca2ab6aa87c1143080d">Window::remote</a></div><div class="ttdeci">bool remote</div><div class="ttdoc">If set, Shared memory extension cannot be used. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00125">window.h:125</a></div></div>
<div class="ttc" id="vector_8h_html_a3efb4ae786e9f0978d02ca3d3ab1234a"><div class="ttname"><a href="vector_8h.html#a3efb4ae786e9f0978d02ca3d3ab1234a">byte3</a></div><div class="ttdeci">vec&lt; bgr, uint8, 3 &gt; byte3</div><div class="ttdoc">Integer b,g,r vector (8bit) </div><div class="ttdef"><b>Definition:</b> <a href="vector_8h_source.html#l00134">vector.h:134</a></div></div>
<div class="ttc" id="struct_window_html_af4c1dc7698860bf05ed683da9275819b"><div class="ttname"><a href="struct_window.html#af4c1dc7698860bf05ed683da9275819b">Window::target</a></div><div class="ttdeci">Image target</div><div class="ttdoc">Rendering target. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00081">window.h:81</a></div></div>
<div class="ttc" id="struct_widget_html_a4b8de06108cb07a1981372a6a865ed97"><div class="ttname"><a href="struct_widget.html#a4b8de06108cb07a1981372a6a865ed97">Widget::mouseEvent</a></div><div class="ttdeci">virtual bool mouseEvent(int2 cursor, int2 size, Event event, Button button)</div><div class="ttdef"><b>Definition:</b> <a href="widget_8h_source.html#l00051">widget.h:51</a></div></div>
<div class="ttc" id="struct_data_html_a356fa96965851da6bdf6d959482a8ed8"><div class="ttname"><a href="struct_data.html#a356fa96965851da6bdf6d959482a8ed8">Data::available</a></div><div class="ttdeci">virtual uint available(uint __attribute((unused)) need=0)</div><div class="ttdoc">Buffers need bytes (if overridden) and returns number of bytes available. </div><div class="ttdef"><b>Definition:</b> <a href="data_8h_source.html#l00060">data.h:60</a></div></div>
<div class="ttc" id="core_8h_html_a2e35c3438d8d47b88bd399ee34e1028a"><div class="ttname"><a href="core_8h.html#a2e35c3438d8d47b88bd399ee34e1028a">assert_</a></div><div class="ttdeci">#define assert_(expr, message...)</div><div class="ttdoc">Aborts if expr evaluates to false and logs expr and message (even in release) </div><div class="ttdef"><b>Definition:</b> <a href="core_8h_source.html#l00107">core.h:107</a></div></div>
<div class="ttc" id="struct_window_html_a8f986e19a11c4c97ed8e6ad3d0e648b7"><div class="ttname"><a href="struct_window.html#a8f986e19a11c4c97ed8e6ad3d0e648b7">Window::show</a></div><div class="ttdeci">void show()</div><div class="ttdoc">Shows window. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00289">window.cc:289</a></div></div>
<div class="ttc" id="struct_window_html_a17d1a02df1c5c93366b4b462e6fc2c36"><div class="ttname"><a href="struct_window.html#a17d1a02df1c5c93366b4b462e6fc2c36">Window::Atom</a></div><div class="ttdeci">uint Atom(const string &amp;name)</div><div class="ttdoc">Returns Atom for name. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00372">window.cc:372</a></div></div>
<div class="ttc" id="struct_window_html_a45e6d4337c720ecb0f7597131468a2ef"><div class="ttname"><a href="struct_window.html#a45e6d4337c720ecb0f7597131468a2ef">Window::overrideRedirect</a></div><div class="ttdeci">bool overrideRedirect</div><div class="ttdoc">If set, this window will not be managed by the session window manager. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00129">window.h:129</a></div></div>
<div class="ttc" id="struct_window_html_a1753467627b029f9fec82d040e3efa5a"><div class="ttname"><a href="struct_window.html#a1753467627b029f9fec82d040e3efa5a">Window::id</a></div><div class="ttdeci">uint id</div><div class="ttdoc">This window base resource id. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00143">window.h:143</a></div></div>
<div class="ttc" id="struct_window_html_a0436f210b321c1d7a105c90227605df7"><div class="ttname"><a href="struct_window.html#a0436f210b321c1d7a105c90227605df7">Window::getSnapshot</a></div><div class="ttdeci">Image getSnapshot()</div><div class="ttdoc">Returns a snapshot of the root window. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00421">window.cc:421</a></div></div>
<div class="ttc" id="struct_window_html_a5b60543bfd05375a7b06a047a95c178e"><div class="ttname"><a href="struct_window.html#a5b60543bfd05375a7b06a047a95c178e">Window::KeyCode</a></div><div class="ttdeci">uint KeyCode(Key sym)</div><div class="ttdoc">Returns KeyCode for sym. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00358">window.cc:358</a></div></div>
<div class="ttc" id="struct_widget_html_a67acadfee077131b97ff8a9d09661084"><div class="ttname"><a href="struct_widget.html#a67acadfee077131b97ff8a9d09661084">Widget::sizeHint</a></div><div class="ttdeci">virtual int2 sizeHint()</div><div class="ttdef"><b>Definition:</b> <a href="widget_8h_source.html#l00037">widget.h:37</a></div></div>
<div class="ttc" id="struct_window_html_a3cae97a0cd0b6f7c78b63b6e49b0280d"><div class="ttname"><a href="struct_window.html#a3cae97a0cd0b6f7c78b63b6e49b0280d">Window::created</a></div><div class="ttdeci">bool created</div><div class="ttdoc">Whether this window was created. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00044">window.h:44</a></div></div>
<div class="ttc" id="struct_window_html_af7d58841d3d0a3ed7f30ce3636840f3a"><div class="ttname"><a href="struct_window.html#af7d58841d3d0a3ed7f30ce3636840f3a">Window::longActionTimers</a></div><div class="ttdeci">map&lt; uint, unique&lt; Timer &gt; &gt; longActionTimers</div><div class="ttdoc">Pending long actions. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00089">window.h:89</a></div></div>
<div class="ttc" id="struct_window_html_a8cfdd24f79ee7e187793fb5643edf33f"><div class="ttname"><a href="struct_window.html#a8cfdd24f79ee7e187793fb5643edf33f">Window::processEvent</a></div><div class="ttdeci">void processEvent(uint8 type, const XEvent &amp;e)</div><div class="ttdoc">Processes one X event. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00188">window.cc:188</a></div></div>
<div class="ttc" id="struct_window_html_a91045daaa903849946bd9530a71493bf"><div class="ttname"><a href="struct_window.html#a91045daaa903849946bd9530a71493bf">Window::actions</a></div><div class="ttdeci">map&lt; Key, function&lt; void()&gt; &gt; actions</div><div class="ttdoc">Actions triggered when a key is pressed (or on release for key mapped with a long action) ...</div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00054">window.h:54</a></div></div>
<div class="ttc" id="graphics_8h_html_a6ecff8c47477caed3bc7851ccf37e95b"><div class="ttname"><a href="graphics_8h.html#a6ecff8c47477caed3bc7851ccf37e95b">fill</a></div><div class="ttdeci">void fill(const Image &amp;target, Rect rect, vec3 color=black, float alpha=1)</div><div class="ttdoc">Fills pixels inside rect with color. </div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cc_source.html#l00062">graphics.cc:62</a></div></div>
<div class="ttc" id="image_8h_html"><div class="ttname"><a href="image_8h.html">image.h</a></div><div class="ttdoc">Image container and operations. </div></div>
<div class="ttc" id="widget_8h_html_a3e97903a82bc719a7d9f20b60b1dd706"><div class="ttname"><a href="widget_8h.html#a3e97903a82bc719a7d9f20b60b1dd706">setFocus</a></div><div class="ttdeci">void setFocus(Widget *widget)</div><div class="ttdoc">Reports keyboard events to this widget. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00007">window.cc:7</a></div></div>
<div class="ttc" id="struct_window_html_a41da9bc5985dfb654faa6927a1a5d923"><div class="ttname"><a href="struct_window.html#a41da9bc5985dfb654faa6927a1a5d923">Window::focus</a></div><div class="ttdeci">Widget * focus</div><div class="ttdoc">Current widget that has the keyboard input focus. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00058">window.h:58</a></div></div>
<div class="ttc" id="thread_8h_html_acf0f6e9021a521d5825a5f0cf5bfb8d5"><div class="ttname"><a href="thread_8h.html#acf0f6e9021a521d5825a5f0cf5bfb8d5">getenv</a></div><div class="ttdeci">string getenv(const string &amp;name, string value=&quot;&quot;)</div><div class="ttdoc">Returns value for environment variable name. </div><div class="ttdef"><b>Definition:</b> <a href="thread_8cc_source.html#l00211">thread.cc:211</a></div></div>
<div class="ttc" id="struct_widget_html_ae852395c66e10fbb55d0a35cab7ffb83"><div class="ttname"><a href="struct_widget.html#ae852395c66e10fbb55d0a35cab7ffb83">Widget::Button</a></div><div class="ttdeci">Button</div><div class="ttdoc">Mouse buttons. </div><div class="ttdef"><b>Definition:</b> <a href="widget_8h_source.html#l00047">widget.h:47</a></div></div>
<div class="ttc" id="struct_window_html_a9f324a3c5a82585e937f3cbfe91611e0"><div class="ttname"><a href="struct_window.html#a9f324a3c5a82585e937f3cbfe91611e0">Window::event</a></div><div class="ttdeci">void event()</div><div class="ttdoc">Event handler: processes input and renders. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00122">window.cc:122</a></div></div>
<div class="ttc" id="struct_semaphore_html_a5c1c10f122da5c7f5c1055508e633ada"><div class="ttname"><a href="struct_semaphore.html#a5c1c10f122da5c7f5c1055508e633ada">Semaphore::tryAcquire</a></div><div class="ttdeci">bool tryAcquire(int64 count)</div><div class="ttdoc">Atomically tries to acquires count ressources only if available. </div><div class="ttdef"><b>Definition:</b> <a href="thread_8h_source.html#l00058">thread.h:58</a></div></div>
<div class="ttc" id="struct_window_html_aa22947de8865a70668deeb28a38e46a3"><div class="ttname"><a href="struct_window.html#aa22947de8865a70668deeb28a38e46a3">Window::mapped</a></div><div class="ttdeci">bool mapped</div><div class="ttdoc">Whether this window is currently mapped. This doesn&#39;t imply the window is visible (can be covered) ...</div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00046">window.h:46</a></div></div>
<div class="ttc" id="graphics_8h_html_ae9e1e766b95ad707f72cd29a46064e2c"><div class="ttname"><a href="graphics_8h.html#ae9e1e766b95ad707f72cd29a46064e2c">blend</a></div><div class="ttdeci">void blend(const Image &amp;target, uint x, uint y, vec3 color, float alpha)</div><div class="ttdoc">Blends pixel at x, y with color. </div><div class="ttdef"><b>Definition:</b> <a href="graphics_8cc_source.html#l00048">graphics.cc:48</a></div></div>
<div class="ttc" id="structvec_html"><div class="ttname"><a href="structvec.html">vec&lt; xy, int, 2 &gt;</a></div></div>
<div class="ttc" id="struct_window_html_a36da1d81135f1f97355b6fa5d50374ee"><div class="ttname"><a href="struct_window.html#a36da1d81135f1f97355b6fa5d50374ee">Window::longActions</a></div><div class="ttdeci">map&lt; Key, function&lt; void()&gt; &gt; longActions</div><div class="ttdoc">Actions triggered when a key is pressed for a long time. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00056">window.h:56</a></div></div>
<div class="ttc" id="structarray_html"><div class="ttname"><a href="structarray.html">array&lt; byte &gt;</a></div></div>
<div class="ttc" id="struct_window_html_a87ea5751f55775de0f411d539f619acc"><div class="ttname"><a href="struct_window.html#a87ea5751f55775de0f411d539f619acc">Window::anchor</a></div><div class="ttdeci">Anchor anchor</div><div class="ttdoc">If set, this window will always be anchored to this position. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00133">window.h:133</a></div></div>
<div class="ttc" id="file_8h_html_ad550f6b197466e8ae37371ca8bee8e4d"><div class="ttname"><a href="file_8h.html#ad550f6b197466e8ae37371ca8bee8e4d">check</a></div><div class="ttdeci">#define check(expr, message...)</div><div class="ttdoc">Aborts if expr is negative and logs corresponding error code. </div><div class="ttdef"><b>Definition:</b> <a href="file_8h_source.html#l00011">file.h:11</a></div></div>
<div class="ttc" id="struct_stream_html_a7b5f7c1782995c957e69bf8d212dface"><div class="ttname"><a href="struct_stream.html#a7b5f7c1782995c957e69bf8d212dface">Stream::read</a></div><div class="ttdeci">T read()</div><div class="ttdoc">Reads a raw value. </div><div class="ttdef"><b>Definition:</b> <a href="file_8h_source.html#l00065">file.h:65</a></div></div>
<div class="ttc" id="vector_8h_html_ac7a1b8f134bbc80aeed76cef94416cf2"><div class="ttname"><a href="vector_8h.html#ac7a1b8f134bbc80aeed76cef94416cf2">int2</a></div><div class="ttdeci">vec&lt; xy, int, 2 &gt; int2</div><div class="ttdoc">Integer x,y vector (32bit) </div><div class="ttdef"><b>Definition:</b> <a href="vector_8h_source.html#l00100">vector.h:100</a></div></div>
<div class="ttc" id="structrange_html"><div class="ttname"><a href="structrange.html">range</a></div><div class="ttdoc">Numeric range. </div><div class="ttdef"><b>Definition:</b> <a href="core_8h_source.html#l00113">core.h:113</a></div></div>
<div class="ttc" id="image_8h_html_a89146bb1b01b095bf4291811b1a90fd5"><div class="ttname"><a href="image_8h.html#a89146bb1b01b095bf4291811b1a90fd5">clip</a></div><div class="ttdeci">Image clip(const Image &amp;image, Rect region)</div><div class="ttdoc">Returns a weak reference to clipped image (unsafe if referenced image is freed) [FIXME: shared]...</div><div class="ttdef"><b>Definition:</b> <a href="image_8cc_source.html#l00006">image.cc:6</a></div></div>
<div class="ttc" id="thread_8h_html_a660644fcee026e3f44448456eb771d0a"><div class="ttname"><a href="thread_8h.html#a660644fcee026e3f44448456eb771d0a">exit</a></div><div class="ttdeci">void exit(int status=0)</div><div class="ttdoc">Flags all threads to terminate as soon as they return to event loop, destroys all global objects and ...</div><div class="ttdef"><b>Definition:</b> <a href="thread_8cc_source.html#l00171">thread.cc:171</a></div></div>
<div class="ttc" id="struct_file_html"><div class="ttname"><a href="struct_file.html">File</a></div><div class="ttdoc">Handle to a file. </div><div class="ttdef"><b>Definition:</b> <a href="file_8h_source.html#l00091">file.h:91</a></div></div>
<div class="ttc" id="structunique_html"><div class="ttname"><a href="structunique.html">unique&lt; XEvent &gt;</a></div></div>
<div class="ttc" id="struct_window_html_a755a60bcf541d7f992f1bf5063e8946a"><div class="ttname"><a href="struct_window.html#a755a60bcf541d7f992f1bf5063e8946a">Window::motionPending</a></div><div class="ttdeci">bool motionPending</div><div class="ttdoc">Whether a motion event is pending processing. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00085">window.h:85</a></div></div>
<div class="ttc" id="struct_locker_html"><div class="ttname"><a href="struct_locker.html">Locker</a></div><div class="ttdoc">Convenience class to automatically unlock a mutex. </div><div class="ttdef"><b>Definition:</b> <a href="thread_8h_source.html#l00032">thread.h:32</a></div></div>
<div class="ttc" id="array_8h_html_afb917b998002d51b040b0b2205572517"><div class="ttname"><a href="array_8h.html#afb917b998002d51b040b0b2205572517">String</a></div><div class="ttdeci">array&lt; byte &gt; String</div><div class="ttdoc">String is an array of bytes. </div><div class="ttdef"><b>Definition:</b> <a href="array_8h_source.html#l00156">array.h:156</a></div></div>
<div class="ttc" id="widget_8h_html_ab7ccae68f2c996eb391f031c35872e16"><div class="ttname"><a href="widget_8h.html#ab7ccae68f2c996eb391f031c35872e16">setDrag</a></div><div class="ttdeci">void setDrag(Widget *widget)</div><div class="ttdoc">Reports further mouse motion events only to this widget (until mouse button is released) ...</div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00009">window.cc:9</a></div></div>
<div class="ttc" id="struct_stream_html_af3019ae0b9b7f16e8d4fef36311633d5"><div class="ttname"><a href="struct_stream.html#af3019ae0b9b7f16e8d4fef36311633d5">Stream::write</a></div><div class="ttdeci">void write(const byte *data, size_t size)</div><div class="ttdoc">Writes buffer of size bytes. </div><div class="ttdef"><b>Definition:</b> <a href="file_8cc_source.html#l00077">file.cc:77</a></div></div>
<div class="ttc" id="file_8h_html_a635ef40ea7469ecaa75dbd5f37a810d9"><div class="ttname"><a href="file_8h.html#a635ef40ea7469ecaa75dbd5f37a810d9">existsFile</a></div><div class="ttdeci">bool existsFile(const string &amp;path, const Folder &amp;at=currentWorkingDirectory())</div><div class="ttdoc">Returns whether path exists (as a file or a folder) </div><div class="ttdef"><b>Definition:</b> <a href="file_8cc_source.html#l00094">file.cc:94</a></div></div>
<div class="ttc" id="string_8h_html_a3dd07628b413a2e63b2952a71d366a15"><div class="ttname"><a href="string_8h.html#a3dd07628b413a2e63b2952a71d366a15">section</a></div><div class="ttdeci">string section(const string &amp;str, byte separator, int begin=0, int end=1)</div><div class="ttdef"><b>Definition:</b> <a href="string_8cc_source.html#l00038">string.cc:38</a></div></div>
<div class="ttc" id="data_8h_html_aeda4f97fb92d2cd709c735708ee1ee35"><div class="ttname"><a href="data_8h.html#aeda4f97fb92d2cd709c735708ee1ee35">align</a></div><div class="ttdeci">uint align(uint width, uint offset)</div><div class="ttdoc">Aligns offset to width (only for power of two width) </div><div class="ttdef"><b>Definition:</b> <a href="data_8h_source.html#l00014">data.h:14</a></div></div>
<div class="ttc" id="structmref_html"><div class="ttname"><a href="structmref.html">mref</a></div><div class="ttdoc">Unmanaged fixed-size mutable reference to an array of elements. </div><div class="ttdef"><b>Definition:</b> <a href="core_8h_source.html#l00203">core.h:203</a></div></div>
<div class="ttc" id="struct_rect_html"><div class="ttname"><a href="struct_rect.html">Rect</a></div><div class="ttdoc">Axis-aligned rectangle with 2D integer coordinates. </div><div class="ttdef"><b>Definition:</b> <a href="image_8h_source.html#l00006">image.h:6</a></div></div>
<div class="ttc" id="struct_window_html_af4cb9ddb3056aab85fb9e3d5ed940b36"><div class="ttname"><a href="struct_window.html#af4cb9ddb3056aab85fb9e3d5ed940b36">Window::shm</a></div><div class="ttdeci">int shm</div><div class="ttdoc">System V shared memory. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00156">window.h:156</a></div></div>
<div class="ttc" id="struct_poll_html_a0d3944c40c5bf892b0d8f44411456d79"><div class="ttname"><a href="struct_poll.html#a0d3944c40c5bf892b0d8f44411456d79">Poll::queue</a></div><div class="ttdeci">void queue()</div><div class="ttdoc">Schedules an event call from thread&#39;s next poll iteration. </div><div class="ttdef"><b>Definition:</b> <a href="thread_8cc_source.html#l00037">thread.cc:37</a></div></div>
<div class="ttc" id="struct_window_html_a5bd9450a50bc2dc26adbef5f55391a1b"><div class="ttname"><a href="struct_window.html#a5bd9450a50bc2dc26adbef5f55391a1b">Window::setCursor</a></div><div class="ttdeci">void setCursor(Cursor cursor)</div><div class="ttdoc">Sets window cursor. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00418">window.cc:418</a></div></div>
<div class="ttc" id="struct_handle_html_adbc8ca925326ef2429a2f3b15a1ed430"><div class="ttname"><a href="struct_handle.html#adbc8ca925326ef2429a2f3b15a1ed430">Handle::name</a></div><div class="ttdeci">String name() const </div><div class="ttdoc">Returns file descriptor name. </div><div class="ttdef"><b>Definition:</b> <a href="file_8cc_source.html#l00021">file.cc:21</a></div></div>
<div class="ttc" id="widget_8h_html_a19d5f1b2584de00a414f6b4951d36b11"><div class="ttname"><a href="widget_8h.html#a19d5f1b2584de00a414f6b4951d36b11">getSelection</a></div><div class="ttdeci">String getSelection(bool clipboard=false)</div><div class="ttdoc">Returns last text selection (or if clipboard is true, last copy) </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00010">window.cc:10</a></div></div>
<div class="ttc" id="string_8h_html_a3aaa1ede719c485014e4823ffa0b0f0a"><div class="ttname"><a href="string_8h.html#a3aaa1ede719c485014e4823ffa0b0f0a">fromInteger</a></div><div class="ttdeci">int64 fromInteger(const string &amp;str, int base=10)</div><div class="ttdoc">Parses an integer value. </div><div class="ttdef"><b>Definition:</b> <a href="string_8cc_source.html#l00076">string.cc:76</a></div></div>
<div class="ttc" id="struct_poll_html"><div class="ttname"><a href="struct_poll.html">Poll</a></div><div class="ttdoc">Poll is a convenient interface to participate in the event loops. </div><div class="ttdef"><b>Definition:</b> <a href="thread_8h_source.html#l00076">thread.h:76</a></div></div>
<div class="ttc" id="structbuffer_html"><div class="ttname"><a href="structbuffer.html">buffer&lt; uint &gt;</a></div></div>
<div class="ttc" id="struct_window_html"><div class="ttname"><a href="struct_window.html">Window</a></div><div class="ttdoc">Interfaces widget as a window on an X11 display server. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00011">window.h:11</a></div></div>
<div class="ttc" id="x_8h_html"><div class="ttname"><a href="x_8h.html">x.h</a></div><div class="ttdoc">X11 protocol. </div></div>
<div class="ttc" id="widget_8h_html_a7138e7abc997c841f712fb05e6a43ce6"><div class="ttname"><a href="widget_8h.html#a7138e7abc997c841f712fb05e6a43ce6">setCursor</a></div><div class="ttdeci">void setCursor(Rect region, Cursor cursor)</div><div class="ttdoc">Sets cursor to be shown when mouse is in the given rectangle. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00011">window.cc:11</a></div></div>
<div class="ttc" id="struct_window_html_ad9c3e41989faec00c4eeaf6459eaadad"><div class="ttname"><a href="struct_window.html#ad9c3e41989faec00c4eeaf6459eaadad">Window::minKeyCode</a></div><div class="ttdeci">uint minKeyCode</div><div class="ttdoc">KeyCode range. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00151">window.h:151</a></div></div>
<div class="ttc" id="image_8h_html_a340a709ab46f72c14522a7e94439b6ca"><div class="ttname"><a href="image_8h.html#a340a709ab46f72c14522a7e94439b6ca">share</a></div><div class="ttdeci">Image share(const Image &amp;o)</div><div class="ttdoc">Returns a weak reference to image (unsafe if referenced image is freed) </div><div class="ttdef"><b>Definition:</b> <a href="image_8h_source.html#l00062">image.h:62</a></div></div>
<div class="ttc" id="struct_window_html_a888d10c70c24a190d015839d2b6d77b2"><div class="ttname"><a href="struct_window.html#a888d10c70c24a190d015839d2b6d77b2">Window::getSelection</a></div><div class="ttdeci">String getSelection(bool clipboard=false)</div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00401">window.cc:401</a></div></div>
<div class="ttc" id="struct_window_html_acf8178cdc1d46472101bb0b1edbbd4a5"><div class="ttname"><a href="struct_window.html#acf8178cdc1d46472101bb0b1edbbd4a5">Window::putImage</a></div><div class="ttdeci">void putImage(Rect r=Rect(0))</div><div class="ttdoc">Sends a partial update. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00164">window.cc:164</a></div></div>
<div class="ttc" id="struct_window_html_ae332f4ec006bb674bcbd4bf261818122"><div class="ttname"><a href="struct_window.html#ae332f4ec006bb674bcbd4bf261818122">Window::setSize</a></div><div class="ttdeci">void setSize(int2 size)</div><div class="ttdoc">Resizes window to size. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00324">window.cc:324</a></div></div>
<div class="ttc" id="struct_window_html_a8a198824af75674d41247259362cb7bc"><div class="ttname"><a href="struct_window.html#a8a198824af75674d41247259362cb7bc">Window::KeySym</a></div><div class="ttdeci">Key KeySym(uint8 code, uint8 state)</div><div class="ttdoc">Returns KeySym for key code and modifier state. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00350">window.cc:350</a></div></div>
<div class="ttc" id="struct_window_html_a887f6b512172fbb2e0cb1df05e8c2a91"><div class="ttname"><a href="struct_window.html#a887f6b512172fbb2e0cb1df05e8c2a91">Window::renderBackground</a></div><div class="ttdeci">void renderBackground(Image &amp;target)</div><div class="ttdoc">Renders window background to target. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00440">window.cc:440</a></div></div>
<div class="ttc" id="struct_window_html_a7abf72670b0092adb82925b2ccfce020"><div class="ttname"><a href="struct_window.html#a7abf72670b0092adb82925b2ccfce020">Window::format</a></div><div class="ttdeci">uint format</div><div class="ttdoc">bgra32 XRender PictFormat (for Cursor) </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00159">window.h:159</a></div></div>
<div class="ttc" id="struct_binary_data_html"><div class="ttname"><a href="struct_binary_data.html">BinaryData</a></div><div class="ttdoc">Provides a convenient interface to parse binary inputs. </div><div class="ttdef"><b>Definition:</b> <a href="data_8h_source.html#l00086">data.h:86</a></div></div>
<div class="ttc" id="struct_window_html_a3bfbdcc73406b828e05c4c814d73d8bc"><div class="ttname"><a href="struct_window.html#a3bfbdcc73406b828e05c4c814d73d8bc">Window::setPosition</a></div><div class="ttdeci">void setPosition(int2 position)</div><div class="ttdoc">Moves window to position. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00319">window.cc:319</a></div></div>
<div class="ttc" id="file_8h_html_a6cb5805c80e446c95264e792058a5403"><div class="ttname"><a href="file_8h.html#a6cb5805c80e446c95264e792058a5403">writeFile</a></div><div class="ttdeci">void writeFile(const string &amp;path, const ref&lt; byte &gt; &amp;content, const Folder &amp;at=currentWorkingDirectory())</div><div class="ttdoc">Writes content into file (overwrites any existing file) </div><div class="ttdef"><b>Definition:</b> <a href="file_8cc_source.html#l00098">file.cc:98</a></div></div>
<div class="ttc" id="struct_window_html_ae296facf4aba47238e946e966ea14f1f"><div class="ttname"><a href="struct_window.html#ae296facf4aba47238e946e966ea14f1f">Window::needRender</a></div><div class="ttdeci">bool needRender</div><div class="ttdoc">Schedules window rendering after all events have been processed (i.e Poll::wait()) ...</div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00097">window.h:97</a></div></div>
<div class="ttc" id="core_8h_html_accaba85207fc2ac61ae5b0bc73fb10e7"><div class="ttname"><a href="core_8h.html#accaba85207fc2ac61ae5b0bc73fb10e7">raw</a></div><div class="ttdeci">ref&lt; byte &gt; raw(const T &amp;t)</div><div class="ttdoc">Returns const reference to memory used by t. </div><div class="ttdef"><b>Definition:</b> <a href="core_8h_source.html#l00177">core.h:177</a></div></div>
<div class="ttc" id="struct_window_html_a35ea9e866d78669be38a4e4a1145ba34"><div class="ttname"><a href="struct_window.html#a35ea9e866d78669be38a4e4a1145ba34">Window::setType</a></div><div class="ttdeci">void setType(const string &amp;type)</div><div class="ttdoc">Sets window type to type. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00384">window.cc:384</a></div></div>
<div class="ttc" id="graphics_8h_html"><div class="ttname"><a href="graphics_8h.html">graphics.h</a></div><div class="ttdoc">2D graphics primitives (fill, blit, line) </div></div>
<div class="ttc" id="widget_8h_html_ac9c915d433bdce7b6b47c0956c850f43"><div class="ttname"><a href="widget_8h.html#ac9c915d433bdce7b6b47c0956c850f43">Cursor</a></div><div class="ttdeci">Cursor</div><div class="ttdoc">Cursor icons. </div><div class="ttdef"><b>Definition:</b> <a href="widget_8h_source.html#l00072">widget.h:72</a></div></div>
<div class="ttc" id="struct_window_html_a298d320bc89f538a45f7549ca70e9d77"><div class="ttname"><a href="struct_window.html#a298d320bc89f538a45f7549ca70e9d77">Window::root</a></div><div class="ttdeci">uint root</div><div class="ttdoc">Root window. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00139">window.h:139</a></div></div>
<div class="ttc" id="struct_binary_data_html_acfa4555151377aebe0914dd7f5524bc1"><div class="ttname"><a href="struct_binary_data.html#acfa4555151377aebe0914dd7f5524bc1">BinaryData::read</a></div><div class="ttdeci">const T &amp; read()</div><div class="ttdoc">Reads one raw T element. </div><div class="ttdef"><b>Definition:</b> <a href="data_8h_source.html#l00109">data.h:109</a></div></div>
<div class="ttc" id="struct_window_html_a982f4b64cdc6d79b9e66ffde645ed042"><div class="ttname"><a href="struct_window.html#a982f4b64cdc6d79b9e66ffde645ed042">Window::widget</a></div><div class="ttdeci">Widget * widget</div><div class="ttdoc">Widget managed by this window. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00042">window.h:42</a></div></div>
<div class="ttc" id="widget_8h_html_ab3c7af4820830f9166ede9e5623c4e73"><div class="ttname"><a href="widget_8h.html#ab3c7af4820830f9166ede9e5623c4e73">Key</a></div><div class="ttdeci">Key</div><div class="ttdoc">Key symbols. </div><div class="ttdef"><b>Definition:</b> <a href="widget_8h_source.html#l00010">widget.h:10</a></div></div>
<div class="ttc" id="struct_window_html_a245d821e6016fa1f6970ccbbedd635f6"><div class="ttname"><a href="struct_window.html#a245d821e6016fa1f6970ccbbedd635f6">Window::~Window</a></div><div class="ttdeci">virtual ~Window()</div><div class="ttdoc">Properly destroys X GC and Window. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00116">window.cc:116</a></div></div>
<div class="ttc" id="core_8h_html_a582bff114cf268d287f9e7548d9fe6d1"><div class="ttname"><a href="core_8h.html#a582bff114cf268d287f9e7548d9fe6d1">error</a></div><div class="ttdeci">void error(const Args &amp;...args) __attribute((noreturn))</div><div class="ttdoc">Logs a message to standard output and signals all threads to log their stack trace and abort...</div></div>
<div class="ttc" id="vector_8h_html_a914d5191de64e7c66a2a471f339a67a6"><div class="ttname"><a href="vector_8h.html#a914d5191de64e7c66a2a471f339a67a6">byte4</a></div><div class="ttdeci">vec&lt; bgra, uint8, 4 &gt; byte4</div><div class="ttdoc">Integer b,g,r,a vector (8bit) </div><div class="ttdef"><b>Definition:</b> <a href="vector_8h_source.html#l00141">vector.h:141</a></div></div>
<div class="ttc" id="struct_widget_html"><div class="ttname"><a href="struct_widget.html">Widget</a></div><div class="ttdoc">Abstract component to compose user interfaces. </div><div class="ttdef"><b>Definition:</b> <a href="widget_8h_source.html#l00032">widget.h:32</a></div></div>
<div class="ttc" id="struct_window_html_afa9a5b47735a7fe05a70ac83fc9f463e"><div class="ttname"><a href="struct_window.html#afa9a5b47735a7fe05a70ac83fc9f463e">Window::displaySize</a></div><div class="ttdeci">int2 displaySize</div><div class="ttdoc">Display size. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00040">window.h:40</a></div></div>
<div class="ttc" id="struct_window_html_aa970503941cd10d50f297d37453e86e9"><div class="ttname"><a href="struct_window.html#aa970503941cd10d50f297d37453e86e9">Window::Window</a></div><div class="ttdeci">Window(Widget *widget=0, const string &amp;name=&quot;&quot;_, int2 size=int2(-1), const Image &amp;icon=Image())</div><div class="ttdef"><b>Definition:</b> <a href="window_8cc_source.html#l00042">window.cc:42</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_1788f8309b1a812dcb800a185471cf6c.html">ui</a></li><li class="navelem"><b>window.cc</b></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
